# ã‚«ãƒ•ã‚§ã‚»ãƒ«ãƒ•ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  (Hearth Coffee)

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦
ã‚«ãƒ•ã‚§ã®ã‚»ãƒ«ãƒ•ã‚ªãƒ¼ãƒ€ãƒ¼ç«¯æœ«ã€‚å•†å“é¸æŠãƒ»ã‚«ãƒ¼ãƒˆç®¡ç†ãƒ»æ±ºæ¸ˆãƒ»Tavusåº—å“¡ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘¼ã³å‡ºã—æ©Ÿèƒ½ã‚’æŒã¤ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- Next.js 16.0.1
- TypeScript 5.9.3
- React 19.2.0
- Tailwind CSS + Radix UI

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
cafe-self-order/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx                           # â†’ /casher_1/home ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”œâ”€â”€ casher_1/
â”‚   â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # ãƒ›ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # æ³¨æ–‡ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ pay/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # æ”¯æ‰•ã„ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ complete/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # å®Œäº†ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductList.tsx            # å•†å“ä¸€è¦§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Cart.tsx                   # ã‚«ãƒ¼ãƒˆè¡¨ç¤º
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AgentMeeting.tsx           # Tavusåº—å“¡å‘¼ã³å‡ºã—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageSelector.tsx       # è¨€èªåˆ‡æ›¿
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ThemeToggle.tsx            # ãƒ†ãƒ¼ãƒåˆ‡æ›¿
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageProvider.tsx       # æ—¥æœ¬èª/è‹±èª
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CartProvider.tsx           # ã‚«ãƒ¼ãƒˆçŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ThemeProvider.tsx          # ãƒ†ãƒ¼ãƒç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ConversationProvider.tsx   # Tavusä¼šè©±ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ styles.module.css
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ conversations/
â”‚   â”‚           â”œâ”€â”€ route.ts                   # POST: ä¼šè©±é–‹å§‹
â”‚   â”‚           â””â”€â”€ [id]/
â”‚   â”‚               â””â”€â”€ end/
â”‚   â”‚                   â””â”€â”€ route.ts           # POST: ä¼šè©±çµ‚äº†
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ tavus/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ errors.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-conversation.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ end-conversation.ts
â”‚   â”‚   â”‚   â””â”€â”€ infrastructure/
â”‚   â”‚   â”‚       â””â”€â”€ tavus-client.ts
â”‚   â”‚   â””â”€â”€ context/
â”‚   â”‚       â””â”€â”€ barista-context-builder.ts     # åº—å“¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ ui/
â”‚           â”œâ”€â”€ button.tsx
â”‚           â”œâ”€â”€ input.tsx
â”‚           â””â”€â”€ label.tsx
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ next.config.ts
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ postcss.config.mjs
â””â”€â”€ .env.local
```

## ç’°å¢ƒå¤‰æ•°

```env
TAVUS_API_KEY=your_tavus_api_key
TAVUS_API_BASE=https://tavusapi.com
REPLICA_ID=barista_replica_id
PERSONA_ID=barista_persona_id
```

## ç”»é¢ãƒ•ãƒ­ãƒ¼

### 1. `/casher_1/home` - ãƒ›ãƒ¼ãƒ ç”»é¢
- åº—å: "Hearth Coffee" (ãƒãƒ­ã‚¦ã‚£ãƒ³ãƒ†ãƒ¼ãƒã§ "ğŸƒ Spooky Coffee")
- è¨€èªé¸æŠ: æ—¥æœ¬èª/è‹±èª
- ãƒ†ãƒ¼ãƒåˆ‡æ›¿: é€šå¸¸/ãƒãƒ­ã‚¦ã‚£ãƒ³
- ã€Œæ³¨æ–‡ã‚’é–‹å§‹ã€ãƒœã‚¿ãƒ³ â†’ `/casher_1/order`
- æ¡ˆå†…: ã‚¹ãƒ†ãƒƒãƒ—1-3ã€å¹³å‡æä¾›æ™‚é–“4-6åˆ†ã€å¯¾å¿œè¨€èªã€æ”¯æ‰•ã„æ–¹æ³•

### 2. `/casher_1/order` - æ³¨æ–‡ç”»é¢
- **å·¦å´**: å•†å“ä¸€è¦§ (ProductList)
  - ã‚«ãƒ¼ãƒ‰ã‚¿ãƒƒãƒ—ã§è¿½åŠ 
  - äººæ°—ãƒ¡ãƒ‹ãƒ¥ãƒ¼å„ªå…ˆè¡¨ç¤º
- **å³å´**: ã‚«ãƒ¼ãƒˆ (Cart) + åº—å“¡å‘¼ã³å‡ºã— (AgentMeeting)
  - æ•°é‡èª¿æ•´
  - Tavusãƒ“ãƒ‡ã‚ªé€šè©±ãƒœã‚¿ãƒ³
- **ä¸‹éƒ¨**: ã€Œæ”¯æ‰•ã„ã¸é€²ã‚€ã€ã€Œã¯ã˜ã‚ã‹ã‚‰ã‚„ã‚Šç›´ã™ã€
- é€²æ—: ã‚¹ãƒ†ãƒƒãƒ—1 (æ³¨æ–‡) â†’ 2 (æ”¯æ‰•ã„) â†’ 3 (å—ã‘å–ã‚Š)

### 3. `/casher_1/pay` - æ”¯æ‰•ã„ç”»é¢
- ã‚«ãƒ¼ãƒˆå†…å®¹ç¢ºèª
- æ”¯æ‰•ã„æ–¹æ³•é¸æŠ (ç¾é‡‘/ã‚«ãƒ¼ãƒ‰/QR)
- æ±ºæ¸ˆå‡¦ç†

### 4. `/casher_1/complete` - å®Œäº†ç”»é¢
- æ³¨æ–‡ç•ªå·è¡¨ç¤º
- 3ç§’å¾Œã«è‡ªå‹•çš„ã« `/casher_1/home` ã¸ãƒªã‚»ãƒƒãƒˆ

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ProductList.tsx
- å•†å“ã‚«ãƒ¼ãƒ‰ä¸€è¦§
- ã‚¿ãƒƒãƒ—ã§å•†å“è¿½åŠ 
- å•†å“æƒ…å ±: åå‰ã€ä¾¡æ ¼ã€ç”»åƒã€èª¬æ˜

### Cart.tsx
- ã‚«ãƒ¼ãƒˆå†…å•†å“è¡¨ç¤º
- æ•°é‡å¢—æ¸›ãƒœã‚¿ãƒ³
- å°è¨ˆãƒ»åˆè¨ˆè¡¨ç¤º
- å‰Šé™¤ãƒœã‚¿ãƒ³

### AgentMeeting.tsx
- ã€Œåº—å“¡ã‚’å‘¼ã¶ã€ãƒœã‚¿ãƒ³
- Tavusä¼šè©±iframeåŸ‹ã‚è¾¼ã¿
- ä¼šè©±é–‹å§‹/çµ‚äº†åˆ¶å¾¡
- éŸ³å£°ãƒ»ãƒ“ãƒ‡ã‚ªã‚µãƒãƒ¼ãƒˆ

### LanguageSelector.tsx
- æ—¥æœ¬èª/è‹±èªåˆ‡æ›¿
- ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†

### ThemeToggle.tsx
- é€šå¸¸/ãƒãƒ­ã‚¦ã‚£ãƒ³ãƒ†ãƒ¼ãƒåˆ‡æ›¿

## Providers

### LanguageProvider
- ç¾åœ¨è¨€èª: `ja` | `en`
- ç¿»è¨³é–¢æ•°: `t(ja, en)`

### CartProvider
- ã‚«ãƒ¼ãƒˆå•†å“: `{ id, name, price, quantity }[]`
- æ“ä½œ: `addItem`, `removeItem`, `updateQuantity`, `clearCart`

### ConversationProvider
- ä¼šè©±IDç®¡ç†
- Tavusä¼šè©±çŠ¶æ…‹

### ThemeProvider
- ãƒ†ãƒ¼ãƒ: `normal` | `halloween`

## APIä»•æ§˜

### POST /api/conversations
**Request:**
```json
{
  "customerContext": "å•†å“ã«ã¤ã„ã¦ã®è³ªå•"
}
```

**Response:**
```json
{
  "conversationId": "conv_123",
  "conversationUrl": "https://tavus.io/..."
}
```

### POST /api/conversations/[id]/end
**Response:**
```json
{
  "success": true
}
```

## åº—å“¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

```typescript
{
  role: "ã‚«ãƒ•ã‚§åº—å“¡ (Barista)",
  greeting: "ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã›ï¼ã”æ³¨æ–‡ã®ãŠæ‰‹ä¼ã„ã‚’ã—ã¾ã™ã€‚",
  capabilities: [
    "å•†å“ã®ãŠã™ã™ã‚",
    "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼å¯¾å¿œã®æ¡ˆå†…",
    "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºç›¸è«‡",
    "å¾…ã¡æ™‚é–“ã®æ¡ˆå†…"
  ],
  menu: [...],
  tone: "ä¸å¯§ã§è¦ªã—ã¿ã‚„ã™ã„"
}
```

## ãƒ‡ãƒ—ãƒ­ã‚¤æ§‹æˆ

### Docker
- ãƒ™ãƒ¼ã‚¹: node:20-alpine
- ãƒãƒ¼ãƒˆ: 3000
- ç’°å¢ƒå¤‰æ•°: Tavus APIè¨­å®š

### ECS
- ã‚¿ã‚¹ã‚¯: cafe-self-order-task
- CPU: 512
- ãƒ¡ãƒ¢ãƒª: 1024
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: awsvpc
- ãƒ­ã‚°: CloudWatch Logs

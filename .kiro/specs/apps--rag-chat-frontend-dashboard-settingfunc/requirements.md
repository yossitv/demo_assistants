# RAG Chat Frontend - Dashboard Settings 機能要件

## 概要

rag-chat-frontendに管理ダッシュボード機能を追加し、エージェントとナレッジスペースの管理（削除、紐付け変更）を可能にする。

## 目的

- 作成済みエージェントの管理（削除、編集）
- 作成済みナレッジスペースの管理（削除）
- エージェントとナレッジスペースの紐付け変更
- 一元的な管理画面の提供

## 機能要件

### FR-1: ダッシュボードルート

- `/dashboard` ルートを新規作成
- 既存のホームページ（`/`）の機能を継承
- エージェント一覧とナレッジスペース一覧を表示

### FR-2: エージェント管理

#### FR-2.1: エージェント一覧表示
- エージェント名、説明、作成日時を表示
- 紐付けられているナレッジスペース名を表示
- 各エージェントに対する操作ボタン（編集、削除、チャット）

#### FR-2.2: エージェント削除
- 削除ボタンクリックで確認ダイアログ表示
- 確認後、バックエンドAPIを呼び出して削除
- 削除成功後、一覧を更新

#### FR-2.3: エージェント編集
- 編集ボタンクリックでモーダル表示
- 編集可能項目:
  - エージェント名
  - 説明
  - システムプロンプト
  - 紐付けナレッジスペース（複数選択可能）
  - strictRAG設定
- 保存後、バックエンドAPIを呼び出して更新

### FR-3: ナレッジスペース管理

#### FR-3.1: ナレッジスペース一覧表示
- ナレッジスペース名、タイプ、ステータス、ドキュメント数を表示
- 各ナレッジスペースに対する操作ボタン（削除）

#### FR-3.2: ナレッジスペース削除
- 削除ボタンクリックで確認ダイアログ表示
- エージェントに紐付いている場合は警告表示
- 確認後、バックエンドAPIを呼び出して削除
- 削除成功後、一覧を更新

### FR-4: バックエンドAPI連携

#### FR-4.1: エージェント削除API
- `DELETE /v1/agent/{agentId}`
- 認証: Bearer Token

#### FR-4.2: エージェント更新API
- `PUT /v1/agent/{agentId}`
- リクエストボディ: エージェント情報（name, description, systemPrompt, knowledgeSpaceIds, strictRAG）
- 認証: Bearer Token

#### FR-4.3: ナレッジスペース削除API
- `DELETE /v1/knowledge/{knowledgeSpaceId}`
- 認証: Bearer Token

## 非機能要件

### NFR-1: ユーザビリティ
- 削除操作には必ず確認ダイアログを表示
- 操作結果（成功/失敗）をトースト通知で表示
- ローディング状態を明示

### NFR-2: エラーハンドリング
- API呼び出し失敗時のエラーメッセージ表示
- ネットワークエラー時のリトライ機能
- 削除済みリソースへのアクセス時の適切なエラー表示

### NFR-3: パフォーマンス
- 一覧表示は1秒以内
- 削除/更新操作は3秒以内

### NFR-4: セキュリティ
- すべてのAPI呼び出しに認証トークンを付与
- CSRF対策（必要に応じて）

## 制約事項

- バックエンド（rag-chat-stream-backend）に削除/更新APIが実装されていることが前提
- 既存の機能（チャット、作成）には影響を与えない
- 既存のコンポーネント（KnowledgeSpaceList等）を最大限再利用

## 成功基準

- ダッシュボードからエージェントを削除できる
- ダッシュボードからナレッジスペースを削除できる
- エージェントの紐付けナレッジスペースを変更できる
- すべての操作で適切なフィードバックが表示される
- 既存機能が正常に動作する

## 参考

- ベースプロジェクト: `apps/rag-chat-frontend`
- バックエンド: `apps/rag-chat-stream-backend`
- 関連仕様: `.kiro/steering/rag-chat-frontend-overview.md`

{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.230.0"},"children":{"RagChatBackendStack":{"id":"RagChatBackendStack","path":"RagChatBackendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"AgentsTable":{"id":"AgentsTable","path":"RagChatBackendStack/AgentsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/AgentsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"agentId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"agentId","keyType":"RANGE"}],"sseSpecification":{"sseEnabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"RagChatBackendStack/AgentsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}}}},"KnowledgeSpacesTable":{"id":"KnowledgeSpacesTable","path":"RagChatBackendStack/KnowledgeSpacesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeSpacesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"knowledgeSpaceId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"knowledgeSpaceId","keyType":"RANGE"}],"sseSpecification":{"sseEnabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"RagChatBackendStack/KnowledgeSpacesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}}}},"ConversationsTable":{"id":"ConversationsTable","path":"RagChatBackendStack/ConversationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ConversationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"conversationId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"conversationId","keyType":"HASH"}],"sseSpecification":{"sseEnabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"RagChatBackendStack/ConversationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}}}},"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"RagChatBackendStack/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportLambdaExecutionRole":{"id":"ImportLambdaExecutionRole","path":"RagChatBackendStack/LambdaExecutionRole/ImportLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"RagChatBackendStack/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"RagChatBackendStack/LambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/LambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AgentsTable78E0948F","Arn"]},{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["KnowledgeSpacesTable2841007C","Arn"]}]}],"Version":"2012-10-17"},"policyName":"LambdaExecutionRoleDefaultPolicy6D69732F","roles":[{"Ref":"LambdaExecutionRoleD5C26073"}]}}}}}}},"KnowledgeCreateFunction":{"id":"KnowledgeCreateFunction","path":"RagChatBackendStack/KnowledgeCreateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"Code":{"id":"Code","path":"RagChatBackendStack/KnowledgeCreateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"RagChatBackendStack/KnowledgeCreateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"RagChatBackendStack/KnowledgeCreateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeCreateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-381492091301-us-east-1","s3Key":"7e67b95403357bd513ba64d4aedc9671eae6b0a335358083c184d398b2c0ffcc.zip"},"environment":{"variables":{"AGENTS_TABLE_NAME":{"Ref":"AgentsTable78E0948F"},"KNOWLEDGE_SPACES_TABLE_NAME":{"Ref":"KnowledgeSpacesTable2841007C"},"CONVERSATIONS_TABLE_NAME":{"Ref":"ConversationsTableCD91EB96"},"OPENAI_API_KEY":"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","QDRANT_URL":"https://eae23d59-8e72-4a96-af53-e6763a27c1f5.us-west-2-0.aws.cloud.qdrant.io","QDRANT_API_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.GIdAAQ6hrzYi2VgVLqfCLBorhLLFXI75CxAB3g_XEcc","EMBEDDING_MODEL":"text-embedding-3-small","LLM_MODEL":"gpt-4o","LOG_LEVEL":"INFO","SIMILARITY_THRESHOLD":"0.35","TOP_K":"8","MAX_CITED_URLS":"3","TAVUS_API_KEY":"example-test-api-key-12345"}},"handler":"handlers/knowledgeCreate.handler","memorySize":1024,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs20.x","timeout":300}}}}},"KnowledgeListFunction":{"id":"KnowledgeListFunction","path":"RagChatBackendStack/KnowledgeListFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"Code":{"id":"Code","path":"RagChatBackendStack/KnowledgeListFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"RagChatBackendStack/KnowledgeListFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"RagChatBackendStack/KnowledgeListFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeListFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-381492091301-us-east-1","s3Key":"7e67b95403357bd513ba64d4aedc9671eae6b0a335358083c184d398b2c0ffcc.zip"},"environment":{"variables":{"AGENTS_TABLE_NAME":{"Ref":"AgentsTable78E0948F"},"KNOWLEDGE_SPACES_TABLE_NAME":{"Ref":"KnowledgeSpacesTable2841007C"},"CONVERSATIONS_TABLE_NAME":{"Ref":"ConversationsTableCD91EB96"},"OPENAI_API_KEY":"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","QDRANT_URL":"https://eae23d59-8e72-4a96-af53-e6763a27c1f5.us-west-2-0.aws.cloud.qdrant.io","QDRANT_API_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.GIdAAQ6hrzYi2VgVLqfCLBorhLLFXI75CxAB3g_XEcc","EMBEDDING_MODEL":"text-embedding-3-small","LLM_MODEL":"gpt-4o","LOG_LEVEL":"INFO","SIMILARITY_THRESHOLD":"0.35","TOP_K":"8","MAX_CITED_URLS":"3","TAVUS_API_KEY":"example-test-api-key-12345"}},"handler":"handlers/knowledgeList.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"AgentCreateFunction":{"id":"AgentCreateFunction","path":"RagChatBackendStack/AgentCreateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"Code":{"id":"Code","path":"RagChatBackendStack/AgentCreateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"RagChatBackendStack/AgentCreateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"RagChatBackendStack/AgentCreateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/AgentCreateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-381492091301-us-east-1","s3Key":"7e67b95403357bd513ba64d4aedc9671eae6b0a335358083c184d398b2c0ffcc.zip"},"environment":{"variables":{"AGENTS_TABLE_NAME":{"Ref":"AgentsTable78E0948F"},"KNOWLEDGE_SPACES_TABLE_NAME":{"Ref":"KnowledgeSpacesTable2841007C"},"CONVERSATIONS_TABLE_NAME":{"Ref":"ConversationsTableCD91EB96"},"OPENAI_API_KEY":"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","QDRANT_URL":"https://eae23d59-8e72-4a96-af53-e6763a27c1f5.us-west-2-0.aws.cloud.qdrant.io","QDRANT_API_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.GIdAAQ6hrzYi2VgVLqfCLBorhLLFXI75CxAB3g_XEcc","EMBEDDING_MODEL":"text-embedding-3-small","LLM_MODEL":"gpt-4o","LOG_LEVEL":"INFO","SIMILARITY_THRESHOLD":"0.35","TOP_K":"8","MAX_CITED_URLS":"3","TAVUS_API_KEY":"example-test-api-key-12345"}},"handler":"handlers/agentCreate.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"ChatFunction":{"id":"ChatFunction","path":"RagChatBackendStack/ChatFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"Code":{"id":"Code","path":"RagChatBackendStack/ChatFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"RagChatBackendStack/ChatFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"RagChatBackendStack/ChatFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/ChatFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-381492091301-us-east-1","s3Key":"7e67b95403357bd513ba64d4aedc9671eae6b0a335358083c184d398b2c0ffcc.zip"},"environment":{"variables":{"AGENTS_TABLE_NAME":{"Ref":"AgentsTable78E0948F"},"KNOWLEDGE_SPACES_TABLE_NAME":{"Ref":"KnowledgeSpacesTable2841007C"},"CONVERSATIONS_TABLE_NAME":{"Ref":"ConversationsTableCD91EB96"},"OPENAI_API_KEY":"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","QDRANT_URL":"https://eae23d59-8e72-4a96-af53-e6763a27c1f5.us-west-2-0.aws.cloud.qdrant.io","QDRANT_API_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.GIdAAQ6hrzYi2VgVLqfCLBorhLLFXI75CxAB3g_XEcc","EMBEDDING_MODEL":"text-embedding-3-small","LLM_MODEL":"gpt-4o","LOG_LEVEL":"INFO","SIMILARITY_THRESHOLD":"0.35","TOP_K":"8","MAX_CITED_URLS":"3","TAVUS_API_KEY":"example-test-api-key-12345"}},"handler":"handlers/chat.handler","memorySize":1024,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs20.x","timeout":60}}}}},"ApiKeyAuthorizerRole":{"id":"ApiKeyAuthorizerRole","path":"RagChatBackendStack/ApiKeyAuthorizerRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportApiKeyAuthorizerRole":{"id":"ImportApiKeyAuthorizerRole","path":"RagChatBackendStack/ApiKeyAuthorizerRole/ImportApiKeyAuthorizerRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"RagChatBackendStack/ApiKeyAuthorizerRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"ApiKeyAuthorizerFunction":{"id":"ApiKeyAuthorizerFunction","path":"RagChatBackendStack/ApiKeyAuthorizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"Code":{"id":"Code","path":"RagChatBackendStack/ApiKeyAuthorizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"RagChatBackendStack/ApiKeyAuthorizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"RagChatBackendStack/ApiKeyAuthorizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/ApiKeyAuthorizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-381492091301-us-east-1","s3Key":"7e67b95403357bd513ba64d4aedc9671eae6b0a335358083c184d398b2c0ffcc.zip"},"environment":{"variables":{"AGENTS_TABLE_NAME":{"Ref":"AgentsTable78E0948F"},"KNOWLEDGE_SPACES_TABLE_NAME":{"Ref":"KnowledgeSpacesTable2841007C"},"CONVERSATIONS_TABLE_NAME":{"Ref":"ConversationsTableCD91EB96"},"OPENAI_API_KEY":"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","QDRANT_URL":"https://eae23d59-8e72-4a96-af53-e6763a27c1f5.us-west-2-0.aws.cloud.qdrant.io","QDRANT_API_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.GIdAAQ6hrzYi2VgVLqfCLBorhLLFXI75CxAB3g_XEcc","EMBEDDING_MODEL":"text-embedding-3-small","LLM_MODEL":"gpt-4o","LOG_LEVEL":"INFO","SIMILARITY_THRESHOLD":"0.35","TOP_K":"8","MAX_CITED_URLS":"3","TAVUS_API_KEY":"example-test-api-key-12345"}},"handler":"handlers/apiKeyAuthorizer.handler","memorySize":128,"role":{"Fn::GetAtt":["ApiKeyAuthorizerRoleE2DD8BB5","Arn"]},"runtime":"nodejs20.x","timeout":5}}},"RagChatBackendStackApiKeyAuthorizer4973A63C:Permissions":{"id":"RagChatBackendStackApiKeyAuthorizer4973A63C:Permissions","path":"RagChatBackendStack/ApiKeyAuthorizerFunction/RagChatBackendStackApiKeyAuthorizer4973A63C:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiKeyAuthorizerFunction06E0AA09","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/authorizers/",{"Ref":"ApiKeyAuthorizerD0BEAC37"}]]}}}}}},"UserPool":{"id":"UserPool","path":"RagChatBackendStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"tenant_id","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"256"},"mutable":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"rag-chat-backend-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"WebClient":{"id":"WebClient","path":"RagChatBackendStack/UserPool/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/UserPool/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}}}},"UserPoolId":{"id":"UserPoolId","path":"RagChatBackendStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"RagChatBackendStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"ApiAccessLogs":{"id":"ApiAccessLogs","path":"RagChatBackendStack/ApiAccessLogs","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ApiAccessLogs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":7}}}}},"RagChatApi":{"id":"RagChatApi","path":"RagChatBackendStack/RagChatApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"apiKeySourceType":"AUTHORIZER","description":"OpenAI-compatible RAG chat API with knowledge management","name":"RAG Chat Backend API"}}},"Deployment":{"id":"Deployment","path":"RagChatBackendStack/RagChatApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"OpenAI-compatible RAG chat API with knowledge management","restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"RagChatBackendStack/RagChatApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"accessLogSetting":{"destinationArn":{"Fn::GetAtt":["ApiAccessLogsE9DF007D","Arn"]},"format":"{\"requestId\":\"$context.requestId\",\"ip\":\"$context.identity.sourceIp\",\"userAgent\":\"$context.identity.userAgent\",\"requestTime\":\"$context.requestTime\",\"httpMethod\":\"$context.httpMethod\",\"resourcePath\":\"$context.resourcePath\",\"status\":\"$context.status\",\"protocol\":\"$context.protocol\",\"responseLength\":\"$context.responseLength\",\"error\":\"$context.error.message\",\"integrationStatus\":\"$context.integrationStatus\",\"apiId\":\"$context.apiId\",\"authorizer\":\"$context.authorizer.principalId\"}"},"deploymentId":{"Ref":"RagChatApiDeployment439075414dcf88b11f6322966bf0d778ca0e7f1c"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":false,"loggingLevel":"INFO","metricsEnabled":true}],"restApiId":{"Ref":"RagChatApi99D73E1D"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"RagChatBackendStack/RagChatApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"Default":{"id":"Default","path":"RagChatBackendStack/RagChatApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.230.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["RagChatApi99D73E1D","RootResourceId"]},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"v1":{"id":"v1","path":"RagChatBackendStack/RagChatApi/Default/v1","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["RagChatApi99D73E1D","RootResourceId"]},"pathPart":"v1","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1BA6F891C"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"knowledge":{"id":"knowledge","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1BA6F891C"},"pathPart":"knowledge","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1knowledge7A457B61"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"create":{"id":"create","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1knowledge7A457B61"},"pathPart":"create","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1knowledgecreate37D4EE34"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"POST":{"id":"POST","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.knowledge.create":{"id":"ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.knowledge.create","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/POST/ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.knowledge.create","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["KnowledgeCreateFunction00DF9D29","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/",{"Ref":"RagChatApiDeploymentStageprod22B9D76E"},"/POST/v1/knowledge/create"]]}}}},"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.knowledge.create":{"id":"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.knowledge.create","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/POST/ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.knowledge.create","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["KnowledgeCreateFunction00DF9D29","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/test-invoke-stage/POST/v1/knowledge/create"]]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/create/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"CUSTOM","authorizerId":{"Ref":"ApiKeyAuthorizerD0BEAC37"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["KnowledgeCreateFunction00DF9D29","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"RagChatApiv1knowledgecreate37D4EE34"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}}}},"list":{"id":"list","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1knowledge7A457B61"},"pathPart":"list","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1knowledgelist5D80CABD"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"GET":{"id":"GET","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.RagChatBackendStackRagChatApi48858D08.GET..v1.knowledge.list":{"id":"ApiPermission.RagChatBackendStackRagChatApi48858D08.GET..v1.knowledge.list","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/GET/ApiPermission.RagChatBackendStackRagChatApi48858D08.GET..v1.knowledge.list","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["KnowledgeListFunction8010F62A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/",{"Ref":"RagChatApiDeploymentStageprod22B9D76E"},"/GET/v1/knowledge/list"]]}}}},"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.GET..v1.knowledge.list":{"id":"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.GET..v1.knowledge.list","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/GET/ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.GET..v1.knowledge.list","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["KnowledgeListFunction8010F62A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/test-invoke-stage/GET/v1/knowledge/list"]]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/knowledge/list/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"CUSTOM","authorizerId":{"Ref":"ApiKeyAuthorizerD0BEAC37"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["KnowledgeListFunction8010F62A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"RagChatApiv1knowledgelist5D80CABD"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}}}}}},"agent":{"id":"agent","path":"RagChatBackendStack/RagChatApi/Default/v1/agent","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1BA6F891C"},"pathPart":"agent","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1agentBA0284CC"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"create":{"id":"create","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1agentBA0284CC"},"pathPart":"create","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1agentcreateCBB8B104"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"POST":{"id":"POST","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.agent.create":{"id":"ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.agent.create","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/POST/ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.agent.create","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AgentCreateFunction5778DBD9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/",{"Ref":"RagChatApiDeploymentStageprod22B9D76E"},"/POST/v1/agent/create"]]}}}},"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.agent.create":{"id":"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.agent.create","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/POST/ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.agent.create","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AgentCreateFunction5778DBD9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/test-invoke-stage/POST/v1/agent/create"]]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/agent/create/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"CUSTOM","authorizerId":{"Ref":"ApiKeyAuthorizerD0BEAC37"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AgentCreateFunction5778DBD9","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"RagChatApiv1agentcreateCBB8B104"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}}}}}},"chat":{"id":"chat","path":"RagChatBackendStack/RagChatApi/Default/v1/chat","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1BA6F891C"},"pathPart":"chat","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1chat82090A87"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"completions":{"id":"completions","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"RagChatApiv1chat82090A87"},"pathPart":"completions","restApiId":{"Ref":"RagChatApi99D73E1D"}}}},"OPTIONS":{"id":"OPTIONS","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,x-api-key,X-API-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"RagChatApiv1chatcompletions2BA80AD2"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"POST":{"id":"POST","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.chat.completions":{"id":"ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.chat.completions","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/POST/ApiPermission.RagChatBackendStackRagChatApi48858D08.POST..v1.chat.completions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatFunction3D7C447E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/",{"Ref":"RagChatApiDeploymentStageprod22B9D76E"},"/POST/v1/chat/completions"]]}}}},"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.chat.completions":{"id":"ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.chat.completions","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/POST/ApiPermission.Test.RagChatBackendStackRagChatApi48858D08.POST..v1.chat.completions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatFunction3D7C447E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:381492091301:",{"Ref":"RagChatApi99D73E1D"},"/test-invoke-stage/POST/v1/chat/completions"]]}}}},"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/Default/v1/chat/completions/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"CUSTOM","authorizerId":{"Ref":"ApiKeyAuthorizerD0BEAC37"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ChatFunction3D7C447E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"RagChatApiv1chatcompletions2BA80AD2"},"restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}}}}}}}}}},"TavusApiKey":{"id":"TavusApiKey","path":"RagChatBackendStack/RagChatApi/TavusApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ApiKey","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/TavusApiKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnApiKey","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::ApiKey","aws:cdk:cloudformation:props":{"description":"API Key for Tavus custom LLM integration","enabled":true,"name":"tavus-llm-key","stageKeys":[{"restApiId":{"Ref":"RagChatApi99D73E1D"},"stageName":{"Ref":"RagChatApiDeploymentStageprod22B9D76E"}}],"value":"example-test-api-key-12345"}}}}},"TavusUsagePlan":{"id":"TavusUsagePlan","path":"RagChatBackendStack/RagChatApi/TavusUsagePlan","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.UsagePlan","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/RagChatApi/TavusUsagePlan/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlan","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlan","aws:cdk:cloudformation:props":{"apiStages":[{"apiId":{"Ref":"RagChatApi99D73E1D"},"stage":{"Ref":"RagChatApiDeploymentStageprod22B9D76E"},"throttle":{}}],"description":"Usage plan for Tavus API key access","usagePlanName":"Tavus LLM Usage Plan"}}},"UsagePlanKeyResource:RagChatBackendStackRagChatApiTavusApiKey33758B3D":{"id":"UsagePlanKeyResource:RagChatBackendStackRagChatApiTavusApiKey33758B3D","path":"RagChatBackendStack/RagChatApi/TavusUsagePlan/UsagePlanKeyResource:RagChatBackendStackRagChatApiTavusApiKey33758B3D","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlanKey","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlanKey","aws:cdk:cloudformation:props":{"keyId":{"Ref":"RagChatApiTavusApiKeyD046BF60"},"keyType":"API_KEY","usagePlanId":{"Ref":"RagChatApiTavusUsagePlan9A5392AD"}}}}}}}},"Default4xxWithCors":{"id":"Default4xxWithCors","path":"RagChatBackendStack/Default4xxWithCors","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/Default4xxWithCors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.Access-Control-Allow-Headers":"'*'","gatewayresponse.header.Access-Control-Allow-Methods":"'*'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"Default5xxWithCors":{"id":"Default5xxWithCors","path":"RagChatBackendStack/Default5xxWithCors","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/Default5xxWithCors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.Access-Control-Allow-Headers":"'*'","gatewayresponse.header.Access-Control-Allow-Methods":"'*'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"RagChatApi99D73E1D"}}}}}},"ApiKeyAuthorizer":{"id":"ApiKeyAuthorizer","path":"RagChatBackendStack/ApiKeyAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestAuthorizer","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ApiKeyAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":0,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["ApiKeyAuthorizerFunction06E0AA09","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["ApiKeyAuthorizerFunction06E0AA09","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ApiKeyAuthorizerFunction06E0AA09","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"RagChatBackendStackApiKeyAuthorizer4973A63C","restApiId":{"Ref":"RagChatApi99D73E1D"},"type":"REQUEST"}}}}},"KnowledgeCreateFunctionErrorRateAlarm":{"id":"KnowledgeCreateFunctionErrorRateAlarm","path":"RagChatBackendStack/KnowledgeCreateFunctionErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeCreateFunctionErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Lambda error rate exceeded 5% for KnowledgeCreateFunction","alarmName":"KnowledgeCreateFunction-ErrorRate-High","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"IF(invocations > 0, (errors / invocations) * 100, 0)","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"Errors","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"KnowledgeCreateFunction00DF9D29"}}]},"period":300,"stat":"Sum"},"id":"errors","returnData":false},{"metricStat":{"metric":{"metricName":"Invocations","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"KnowledgeCreateFunction00DF9D29"}}]},"period":300,"stat":"Sum"},"id":"invocations","returnData":false}],"threshold":5,"treatMissingData":"notBreaching"}}}}},"KnowledgeListFunctionErrorRateAlarm":{"id":"KnowledgeListFunctionErrorRateAlarm","path":"RagChatBackendStack/KnowledgeListFunctionErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeListFunctionErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Lambda error rate exceeded 5% for KnowledgeListFunction","alarmName":"KnowledgeListFunction-ErrorRate-High","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"IF(invocations > 0, (errors / invocations) * 100, 0)","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"Errors","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"KnowledgeListFunction8010F62A"}}]},"period":300,"stat":"Sum"},"id":"errors","returnData":false},{"metricStat":{"metric":{"metricName":"Invocations","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"KnowledgeListFunction8010F62A"}}]},"period":300,"stat":"Sum"},"id":"invocations","returnData":false}],"threshold":5,"treatMissingData":"notBreaching"}}}}},"AgentCreateFunctionErrorRateAlarm":{"id":"AgentCreateFunctionErrorRateAlarm","path":"RagChatBackendStack/AgentCreateFunctionErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/AgentCreateFunctionErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Lambda error rate exceeded 5% for AgentCreateFunction","alarmName":"AgentCreateFunction-ErrorRate-High","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"IF(invocations > 0, (errors / invocations) * 100, 0)","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"Errors","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"AgentCreateFunction5778DBD9"}}]},"period":300,"stat":"Sum"},"id":"errors","returnData":false},{"metricStat":{"metric":{"metricName":"Invocations","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"AgentCreateFunction5778DBD9"}}]},"period":300,"stat":"Sum"},"id":"invocations","returnData":false}],"threshold":5,"treatMissingData":"notBreaching"}}}}},"ChatFunctionErrorRateAlarm":{"id":"ChatFunctionErrorRateAlarm","path":"RagChatBackendStack/ChatFunctionErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ChatFunctionErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Lambda error rate exceeded 5% for ChatFunction","alarmName":"ChatFunction-ErrorRate-High","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"IF(invocations > 0, (errors / invocations) * 100, 0)","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"Errors","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"ChatFunction3D7C447E"}}]},"period":300,"stat":"Sum"},"id":"errors","returnData":false},{"metricStat":{"metric":{"metricName":"Invocations","namespace":"AWS/Lambda","dimensions":[{"name":"FunctionName","value":{"Ref":"ChatFunction3D7C447E"}}]},"period":300,"stat":"Sum"},"id":"invocations","returnData":false}],"threshold":5,"treatMissingData":"notBreaching"}}}}},"ApiGateway5xxErrorRateAlarm":{"id":"ApiGateway5xxErrorRateAlarm","path":"RagChatBackendStack/ApiGateway5xxErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ApiGateway5xxErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"API Gateway 5xx error rate exceeded 1%","alarmName":"ApiGateway-5xxErrorRate-High","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"IF(requests > 0, (errors / requests) * 100, 0)","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"5XXError","namespace":"AWS/ApiGateway","dimensions":[{"name":"ApiName","value":"RAG Chat Backend API"}]},"period":300,"stat":"Sum"},"id":"errors","returnData":false},{"metricStat":{"metric":{"metricName":"Count","namespace":"AWS/ApiGateway","dimensions":[{"name":"ApiName","value":"RAG Chat Backend API"}]},"period":300,"stat":"Sum"},"id":"requests","returnData":false}],"threshold":1,"treatMissingData":"notBreaching"}}}}},"AgentsTableReadThrottleAlarm":{"id":"AgentsTableReadThrottleAlarm","path":"RagChatBackendStack/AgentsTableReadThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/AgentsTableReadThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB read throttling detected on AgentsTable","alarmName":"AgentsTable-ReadThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"GetItem"},{"name":"TableName","value":{"Ref":"AgentsTable78E0948F"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"AgentsTableWriteThrottleAlarm":{"id":"AgentsTableWriteThrottleAlarm","path":"RagChatBackendStack/AgentsTableWriteThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/AgentsTableWriteThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB write throttling detected on AgentsTable","alarmName":"AgentsTable-WriteThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"PutItem"},{"name":"TableName","value":{"Ref":"AgentsTable78E0948F"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"AgentsTableQueryThrottleAlarm":{"id":"AgentsTableQueryThrottleAlarm","path":"RagChatBackendStack/AgentsTableQueryThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/AgentsTableQueryThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB query throttling detected on AgentsTable","alarmName":"AgentsTable-QueryThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"Query"},{"name":"TableName","value":{"Ref":"AgentsTable78E0948F"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"KnowledgeSpacesTableReadThrottleAlarm":{"id":"KnowledgeSpacesTableReadThrottleAlarm","path":"RagChatBackendStack/KnowledgeSpacesTableReadThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeSpacesTableReadThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB read throttling detected on KnowledgeSpacesTable","alarmName":"KnowledgeSpacesTable-ReadThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"GetItem"},{"name":"TableName","value":{"Ref":"KnowledgeSpacesTable2841007C"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"KnowledgeSpacesTableWriteThrottleAlarm":{"id":"KnowledgeSpacesTableWriteThrottleAlarm","path":"RagChatBackendStack/KnowledgeSpacesTableWriteThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeSpacesTableWriteThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB write throttling detected on KnowledgeSpacesTable","alarmName":"KnowledgeSpacesTable-WriteThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"PutItem"},{"name":"TableName","value":{"Ref":"KnowledgeSpacesTable2841007C"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"KnowledgeSpacesTableQueryThrottleAlarm":{"id":"KnowledgeSpacesTableQueryThrottleAlarm","path":"RagChatBackendStack/KnowledgeSpacesTableQueryThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/KnowledgeSpacesTableQueryThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB query throttling detected on KnowledgeSpacesTable","alarmName":"KnowledgeSpacesTable-QueryThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"Query"},{"name":"TableName","value":{"Ref":"KnowledgeSpacesTable2841007C"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"ConversationsTableReadThrottleAlarm":{"id":"ConversationsTableReadThrottleAlarm","path":"RagChatBackendStack/ConversationsTableReadThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ConversationsTableReadThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB read throttling detected on ConversationsTable","alarmName":"ConversationsTable-ReadThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"GetItem"},{"name":"TableName","value":{"Ref":"ConversationsTableCD91EB96"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"ConversationsTableWriteThrottleAlarm":{"id":"ConversationsTableWriteThrottleAlarm","path":"RagChatBackendStack/ConversationsTableWriteThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ConversationsTableWriteThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB write throttling detected on ConversationsTable","alarmName":"ConversationsTable-WriteThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"PutItem"},{"name":"TableName","value":{"Ref":"ConversationsTableCD91EB96"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"ConversationsTableQueryThrottleAlarm":{"id":"ConversationsTableQueryThrottleAlarm","path":"RagChatBackendStack/ConversationsTableQueryThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"RagChatBackendStack/ConversationsTableQueryThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DynamoDB query throttling detected on ConversationsTable","alarmName":"ConversationsTable-QueryThrottling","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"Operation","value":"Query"},{"name":"TableName","value":{"Ref":"ConversationsTableCD91EB96"}}],"evaluationPeriods":1,"metricName":"ThrottledRequests","namespace":"AWS/DynamoDB","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"ApiUrl":{"id":"ApiUrl","path":"RagChatBackendStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"AgentsTableName":{"id":"AgentsTableName","path":"RagChatBackendStack/AgentsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"KnowledgeSpacesTableName":{"id":"KnowledgeSpacesTableName","path":"RagChatBackendStack/KnowledgeSpacesTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"ConversationsTableName":{"id":"ConversationsTableName","path":"RagChatBackendStack/ConversationsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"TavusApiKeyValue":{"id":"TavusApiKeyValue","path":"RagChatBackendStack/TavusApiKeyValue","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"RagChatBackendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"RagChatBackendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"RagChatBackendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"RagChatBackendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}
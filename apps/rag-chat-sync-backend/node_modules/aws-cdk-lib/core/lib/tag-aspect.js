"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RemoveTag=exports.Tags=exports.Tag=void 0;var jsiiDeprecationWarnings=()=>{var tmp=require("../../.warnings.jsii.js");return jsiiDeprecationWarnings=()=>tmp,tmp};const JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti");var annotations_1=()=>{var tmp=require("./annotations");return annotations_1=()=>tmp,tmp},aspect_1=()=>{var tmp=require("./aspect");return aspect_1=()=>tmp,tmp},errors_1=()=>{var tmp=require("./errors");return errors_1=()=>tmp,tmp},feature_flags_1=()=>{var tmp=require("./feature-flags");return feature_flags_1=()=>tmp,tmp},cxapi=()=>{var tmp=require("../../cx-api");return cxapi=()=>tmp,tmp},aspect_prio_1=()=>{var tmp=require("./private/aspect-prio");return aspect_prio_1=()=>tmp,tmp},tag_manager_1=()=>{var tmp=require("./tag-manager");return tag_manager_1=()=>tmp,tmp};class TagBase{key;props;constructor(key,props={}){this.key=key,this.props=props}visit(construct){tag_manager_1().TagManager.isTaggableV2(construct)?this.applyTagV2(construct):tag_manager_1().TagManager.isTaggable(construct)&&this.applyTag(construct)}}class Tag extends TagBase{static[JSII_RTTI_SYMBOL_1]={fqn:"aws-cdk-lib.Tag",version:"2.230.0"};static add(scope,key,value,props={}){annotations_1().Annotations.of(scope).addDeprecation("@aws-cdk/core.Tag.add(scope,k,v)",'Use "Tags.of(scope).add(k,v)" instead'),Tags.of(scope).add(key,value,props)}static remove(scope,key,props={}){annotations_1().Annotations.of(scope).addDeprecation("@aws-cdk/core.Tag.remove(scope,k,v)",'Use "Tags.of(scope).remove(k,v)" instead'),Tags.of(scope).remove(key,props)}value;defaultPriority=100;constructor(key,value,props={}){super(key,props);try{jsiiDeprecationWarnings().aws_cdk_lib_TagProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,Tag),error}if(value===void 0)throw new(errors_1()).UnscopedValidationError(`Tag '${key}' must have a value`);this.value=value}applyTag(resource){try{jsiiDeprecationWarnings().aws_cdk_lib_ITaggable(resource)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.applyTag),error}this.applyManager(resource.tags)}applyTagV2(resource){try{jsiiDeprecationWarnings().aws_cdk_lib_ITaggableV2(resource)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.applyTagV2),error}this.applyManager(resource.cdkTagManager)}applyManager(mgr){mgr.applyTagAspectHere(this.props.includeResourceTypes,this.props.excludeResourceTypes)&&mgr.setTag(this.key,this.value,this.props.priority??this.defaultPriority,this.props.applyToLaunchedInstances!==!1)}}exports.Tag=Tag;class Tags{scope;static[JSII_RTTI_SYMBOL_1]={fqn:"aws-cdk-lib.Tags",version:"2.230.0"};static of(scope){return new Tags(scope)}explicitStackTags;constructor(scope){this.scope=scope,this.explicitStackTags=feature_flags_1().FeatureFlags.of(scope).isEnabled(cxapi().EXPLICIT_STACK_TAGS)??!1}add(key,value,props={}){try{jsiiDeprecationWarnings().aws_cdk_lib_TagProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.add),error}this.explicitStackTags&&!props.includeResourceTypes?.includes("aws:cdk:stack")&&(props={...props,excludeResourceTypes:[...props.excludeResourceTypes??[],"aws:cdk:stack"]});const tag=new Tag(key,value,props),options={priority:(0,aspect_prio_1().mutatingAspectPrio32333)(this.scope)};aspect_1().Aspects.of(this.scope).add(tag,options)}remove(key,props={}){try{jsiiDeprecationWarnings().aws_cdk_lib_TagProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.remove),error}const removeTag=new RemoveTag(key,props),options={priority:(0,aspect_prio_1().mutatingAspectPrio32333)(this.scope)};aspect_1().Aspects.of(this.scope).add(removeTag,options)}}exports.Tags=Tags;class RemoveTag extends TagBase{static[JSII_RTTI_SYMBOL_1]={fqn:"aws-cdk-lib.RemoveTag",version:"2.230.0"};defaultPriority=200;constructor(key,props={}){super(key,props);try{jsiiDeprecationWarnings().aws_cdk_lib_TagProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,RemoveTag),error}}applyTag(resource){try{jsiiDeprecationWarnings().aws_cdk_lib_ITaggable(resource)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.applyTag),error}this.applyManager(resource.tags)}applyTagV2(resource){try{jsiiDeprecationWarnings().aws_cdk_lib_ITaggableV2(resource)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.applyTagV2),error}this.applyManager(resource.cdkTagManager)}applyManager(mgr){mgr.applyTagAspectHere(this.props.includeResourceTypes,this.props.excludeResourceTypes)&&mgr.removeTag(this.key,this.props.priority??this.defaultPriority)}}exports.RemoveTag=RemoveTag;

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlSubscription=void 0;var jsiiDeprecationWarnings=()=>{var tmp=require("../../.warnings.jsii.js");return jsiiDeprecationWarnings=()=>tmp,tmp};const JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti");var sns=()=>{var tmp=require("../../aws-sns");return sns=()=>tmp,tmp},core_1=()=>{var tmp=require("../../core");return core_1=()=>tmp,tmp};class UrlSubscription{url;props;static[JSII_RTTI_SYMBOL_1]={fqn:"aws-cdk-lib.aws_sns_subscriptions.UrlSubscription",version:"2.230.0"};static PROPERTY_INJECTION_ID="aws-cdk-lib.aws-sns-subscriptions.UrlSubscription";protocol;unresolvedUrl;constructor(url,props={}){this.url=url,this.props=props;try{jsiiDeprecationWarnings().aws_cdk_lib_aws_sns_subscriptions_UrlSubscriptionProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,UrlSubscription),error}if(this.unresolvedUrl=core_1().Token.isUnresolved(url),!this.unresolvedUrl&&!url.startsWith("http://")&&!url.startsWith("https://"))throw new(core_1()).UnscopedValidationError("URL must start with either http:// or https://");if(this.unresolvedUrl&&props.protocol===void 0)throw new(core_1()).UnscopedValidationError("Must provide protocol if url is unresolved");this.unresolvedUrl?this.protocol=props.protocol:this.protocol=this.url.startsWith("https:")?sns().SubscriptionProtocol.HTTPS:sns().SubscriptionProtocol.HTTP}bind(_topic){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_sns_ITopic(_topic)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.bind),error}return{subscriberId:this.url,endpoint:this.url,protocol:this.protocol,rawMessageDelivery:this.props.rawMessageDelivery,filterPolicy:this.props.filterPolicy,filterPolicyWithMessageBody:this.props.filterPolicyWithMessageBody,deadLetterQueue:this.props.deadLetterQueue,deliveryPolicy:this.props.deliveryPolicy}}}exports.UrlSubscription=UrlSubscription;

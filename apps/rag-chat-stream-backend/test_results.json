
> rag-chat-stream-backend@1.0.0 test
> jest --runInBand --json

{"numFailedTestSuites":2,"numFailedTests":0,"numPassedTestSuites":38,"numPassedTests":342,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":2,"numTodoTests":0,"numTotalTestSuites":40,"numTotalTests":342,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1764899078707,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["CheerioCrawlerService","crawlUrl"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"CheerioCrawlerService crawlUrl should extract title and content from HTML","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should extract title and content from HTML"},{"ancestorTitles":["CheerioCrawlerService","crawlUrl"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CheerioCrawlerService crawlUrl should handle pages without title","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle pages without title"},{"ancestorTitles":["CheerioCrawlerService","crawlUrl"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CheerioCrawlerService crawlUrl should normalize whitespace in content","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should normalize whitespace in content"},{"ancestorTitles":["CheerioCrawlerService","crawlUrl"],"duration":3007,"failureDetails":[],"failureMessages":[],"fullName":"CheerioCrawlerService crawlUrl should handle network errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle network errors"}],"endTime":1764899082979,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/CheerioCrawlerService.test.ts","startTime":1764899078855,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 10: Embedding consistency"],"duration":65,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should maintain 1536 dimensions for all valid embeddings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should maintain 1536 dimensions for all valid embeddings"},{"ancestorTitles":["Property 10: Embedding consistency"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should reject embeddings with incorrect dimensions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject embeddings with incorrect dimensions"},{"ancestorTitles":["Property 10: Embedding consistency"],"duration":559,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should compute cosine similarity correctly for identical embeddings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should compute cosine similarity correctly for identical embeddings"},{"ancestorTitles":["Property 10: Embedding consistency"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should compute cosine similarity correctly for orthogonal embeddings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should compute cosine similarity correctly for orthogonal embeddings"},{"ancestorTitles":["Property 10: Embedding consistency"],"duration":1205,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should compute cosine similarity symmetrically","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should compute cosine similarity symmetrically"},{"ancestorTitles":["Property 10: Embedding consistency"],"duration":926,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should have cosine similarity in range [-1, 1]","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should have cosine similarity in range [-1, 1]"},{"ancestorTitles":["Property 10: Embedding consistency"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Embedding consistency should validate that all vector elements are numbers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should validate that all vector elements are numbers"}],"endTime":1764899085850,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/domain/value-objects/Embedding.property.test.ts","startTime":1764899082983,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for network errors (ECONNRESET)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for network errors (ECONNRESET)"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for network errors (ETIMEDOUT)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for network errors (ETIMEDOUT)"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for network errors (ENOTFOUND)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for network errors (ENOTFOUND)"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for 429 rate limit errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for 429 rate limit errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for 503 service unavailable errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for 503 service unavailable errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for 502 bad gateway errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for 502 bad gateway errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for 504 gateway timeout errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for 504 gateway timeout errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns false for 400 bad request errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false for 400 bad request errors"},{"ancestorTitles":["isRetryableError"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns false for 401 unauthorized errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false for 401 unauthorized errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns false for 403 forbidden errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false for 403 forbidden errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns false for 404 not found errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false for 404 not found errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns false for circuit breaker errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns false for circuit breaker errors"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for errors with timeout in message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for errors with timeout in message"},{"ancestorTitles":["isRetryableError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError returns true for unknown errors (conservative approach)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns true for unknown errors (conservative approach)"},{"ancestorTitles":["retryWithBackoff"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff succeeds on first attempt without retry","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"succeeds on first attempt without retry"},{"ancestorTitles":["retryWithBackoff"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff retries until the operation succeeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries until the operation succeeds"},{"ancestorTitles":["retryWithBackoff"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff throws after max attempts are exhausted","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"throws after max attempts are exhausted"},{"ancestorTitles":["retryWithBackoff"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff stops retrying immediately on non-retryable errors (4xx)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"stops retrying immediately on non-retryable errors (4xx)"},{"ancestorTitles":["retryWithBackoff"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff stops retrying on circuit breaker errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"stops retrying on circuit breaker errors"},{"ancestorTitles":["retryWithBackoff"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff retries on rate limit errors (429)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries on rate limit errors (429)"},{"ancestorTitles":["retryWithBackoff"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff retries on network errors (ECONNRESET)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries on network errors (ECONNRESET)"},{"ancestorTitles":["retryWithBackoff"],"duration":302,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff uses exponential backoff for delays","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"uses exponential backoff for delays"},{"ancestorTitles":["retryWithBackoff"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff respects maxDelayMs cap","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"respects maxDelayMs cap"},{"ancestorTitles":["retryWithBackoff"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff logs retry attempts when logger is provided","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"logs retry attempts when logger is provided"},{"ancestorTitles":["retryWithBackoff"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"retryWithBackoff logs when error is not retryable","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"logs when error is not retryable"},{"ancestorTitles":["CircuitBreaker"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreaker allows successful operations","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"allows successful operations"},{"ancestorTitles":["CircuitBreaker"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreaker opens after consecutive failures reach threshold","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"opens after consecutive failures reach threshold"},{"ancestorTitles":["CircuitBreaker"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreaker rejects calls when circuit is open","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"rejects calls when circuit is open"},{"ancestorTitles":["CircuitBreaker"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreaker resets failure count on successful operation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"resets failure count on successful operation"}],"endTime":1764899086193,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/retry.test.ts","startTime":1764899085854,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Property 6: Cited URLs are subset of context"],"duration":124,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Property 6: Cited URLs are subset of context should only cite URLs that appear in context chunks","invocations":1,"location":null,"numPassingAsserts":234,"retryReasons":[],"status":"passed","title":"should only cite URLs that appear in context chunks"},{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Property 6: Cited URLs are subset of context"],"duration":142,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Property 6: Cited URLs are subset of context should handle chunks with duplicate URLs correctly","invocations":1,"location":null,"numPassingAsserts":219,"retryReasons":[],"status":"passed","title":"should handle chunks with duplicate URLs correctly"},{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Property 7: Cited URLs deduplication"],"duration":102,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Property 7: Cited URLs deduplication should contain no duplicate URLs","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"should contain no duplicate URLs"},{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Property 7: Cited URLs deduplication"],"duration":113,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Property 7: Cited URLs deduplication should contain at most 3 URLs","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"should contain at most 3 URLs"},{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Property 7: Cited URLs deduplication"],"duration":135,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Property 7: Cited URLs deduplication should deduplicate URLs from multiple chunks with same URL","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"should deduplicate URLs from multiple chunks with same URL"},{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Property 7: Cited URLs deduplication"],"duration":238,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Property 7: Cited URLs deduplication should respect MAX_CITED_URLS limit even with many unique URLs","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"should respect MAX_CITED_URLS limit even with many unique URLs"},{"ancestorTitles":["Properties 6 & 7: Cited URLs validation","Combined Properties 6 & 7"],"duration":124,"failureDetails":[],"failureMessages":[],"fullName":"Properties 6 & 7: Cited URLs validation Combined Properties 6 & 7 should satisfy both properties simultaneously","invocations":1,"location":null,"numPassingAsserts":443,"retryReasons":[],"status":"passed","title":"should satisfy both properties simultaneously"}],"endTime":1764899087524,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/ChatWithAgentUseCase.citedUrls.property.test.ts","startTime":1764899086196,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1764899090742,"message":"  ‚óè Test suite failed to run\n\n    \u001b[96msrc/use-cases/CreateKnowledgeSpaceUseCase.property.test.ts\u001b[0m:\u001b[93m35\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2741: \u001b[0mProperty 'delete' is missing in type '{ save: jest.Mock<Promise<void>, [ks: KnowledgeSpace], any>; findByTenant: jest.Mock<any, any, any>; findByTenantAndId: jest.Mock<any, any, any>; }' but required in type 'IKnowledgeSpaceRepository'.\n\n    \u001b[7m35\u001b[0m     const knowledgeSpaceRepo: IKnowledgeSpaceRepository = {\n    \u001b[7m  \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/domain/repositories/IKnowledgeSpaceRepository.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m34\u001b[0m   delete(tenantId: string, ksId: string): Promise<void>;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        'delete' is declared here.\n    \u001b[96msrc/use-cases/CreateKnowledgeSpaceUseCase.property.test.ts\u001b[0m:\u001b[93m43\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2741: \u001b[0mProperty 'deleteCollection' is missing in type '{ upsertChunks: jest.Mock<Promise<void>, [namespace: Namespace, chunks: Chunk[]], any>; searchSimilar: jest.Mock<Promise<{ chunk: Chunk; score: number; }[]>, [namespace: ...], any>; }' but required in type 'IVectorRepository'.\n\n    \u001b[7m43\u001b[0m     const vectorRepo: IVectorRepository = {\n    \u001b[7m  \u001b[0m \u001b[91m          ~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/domain/repositories/IVectorRepository.ts\u001b[0m:\u001b[93m46\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m46\u001b[0m   deleteCollection(collectionName: string): Promise<void>;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        'deleteCollection' is declared here.\n","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/CreateKnowledgeSpaceUseCase.property.test.ts","startTime":1764899090742,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 5: Strict RAG enforcement"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Strict RAG enforcement should return fixed message when strictRAG=true and no search results","invocations":1,"location":null,"numPassingAsserts":1000,"retryReasons":[],"status":"passed","title":"should return fixed message when strictRAG=true and no search results"},{"ancestorTitles":["Property 5: Strict RAG enforcement"],"duration":74,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Strict RAG enforcement should return fixed message when strictRAG=true and results below threshold","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"should return fixed message when strictRAG=true and results below threshold"},{"ancestorTitles":["Property 5: Strict RAG enforcement"],"duration":74,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Strict RAG enforcement should call LLM when strictRAG=true but results meet threshold","invocations":1,"location":null,"numPassingAsserts":500,"retryReasons":[],"status":"passed","title":"should call LLM when strictRAG=true but results meet threshold"},{"ancestorTitles":["Property 5: Strict RAG enforcement"],"duration":34,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Strict RAG enforcement should NOT return fixed message when strictRAG=false and no results","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"should NOT return fixed message when strictRAG=false and no results"},{"ancestorTitles":["Property 5: Strict RAG enforcement"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Strict RAG enforcement should handle multiple knowledge spaces with no results in strict mode","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"should handle multiple knowledge spaces with no results in strict mode"},{"ancestorTitles":["Property 5: Strict RAG enforcement"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Strict RAG enforcement should preserve exact message format in strict RAG mode","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"should preserve exact message format in strict RAG mode"}],"endTime":1764899088087,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/ChatWithAgentUseCase.strictRAG.property.test.ts","startTime":1764899087663,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should search all linked KnowledgeSpaces","invocations":1,"location":null,"numPassingAsserts":372,"retryReasons":[],"status":"passed","title":"should search all linked KnowledgeSpaces"},{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should NOT search unlinked KnowledgeSpaces","invocations":1,"location":null,"numPassingAsserts":302,"retryReasons":[],"status":"passed","title":"should NOT search unlinked KnowledgeSpaces"},{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should search with correct namespace format for each KnowledgeSpace","invocations":1,"location":null,"numPassingAsserts":286,"retryReasons":[],"status":"passed","title":"should search with correct namespace format for each KnowledgeSpace"},{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":71,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should merge results from multiple KnowledgeSpaces","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"should merge results from multiple KnowledgeSpaces"},{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should handle missing KnowledgeSpaces gracefully","invocations":1,"location":null,"numPassingAsserts":254,"retryReasons":[],"status":"passed","title":"should handle missing KnowledgeSpaces gracefully"},{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should use correct TOP_K value for each KnowledgeSpace search","invocations":1,"location":null,"numPassingAsserts":298,"retryReasons":[],"status":"passed","title":"should use correct TOP_K value for each KnowledgeSpace search"},{"ancestorTitles":["Property 11: Agent-KnowledgeSpace linking"],"duration":34,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Agent-KnowledgeSpace linking should search with same query embedding for all KnowledgeSpaces","invocations":1,"location":null,"numPassingAsserts":526,"retryReasons":[],"status":"passed","title":"should search with same query embedding for all KnowledgeSpaces"}],"endTime":1764899088476,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/ChatWithAgentUseCase.agentKSLinking.property.test.ts","startTime":1764899088093,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Agents Table CRUD Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Agents Table CRUD Operations should successfully create an agent (PUT)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully create an agent (PUT)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Agents Table CRUD Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Agents Table CRUD Operations should successfully retrieve an agent by tenantId and agentId (GET)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should successfully retrieve an agent by tenantId and agentId (GET)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Agents Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Agents Table CRUD Operations should successfully query agents by tenantId (QUERY)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should successfully query agents by tenantId (QUERY)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Agents Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Agents Table CRUD Operations should successfully delete an agent (DELETE)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully delete an agent (DELETE)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","KnowledgeSpaces Table CRUD Operations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations KnowledgeSpaces Table CRUD Operations should successfully create a knowledge space (PUT)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully create a knowledge space (PUT)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","KnowledgeSpaces Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations KnowledgeSpaces Table CRUD Operations should successfully retrieve a knowledge space (GET)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully retrieve a knowledge space (GET)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","KnowledgeSpaces Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations KnowledgeSpaces Table CRUD Operations should successfully query knowledge spaces by tenant (QUERY)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully query knowledge spaces by tenant (QUERY)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Conversations Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Conversations Table CRUD Operations should successfully create a conversation (PUT)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully create a conversation (PUT)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Conversations Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Conversations Table CRUD Operations should successfully retrieve a conversation (GET)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully retrieve a conversation (GET)"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Conversations Table CRUD Operations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Conversations Table CRUD Operations should handle missing conversations gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing conversations gracefully"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Table Resource Names and Configuration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Table Resource Names and Configuration should have correct table names from environment variables","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should have correct table names from environment variables"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Table Resource Names and Configuration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Table Resource Names and Configuration should validate agents table schema requirements","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should validate agents table schema requirements"},{"ancestorTitles":["Infrastructure Integration Tests","DynamoDB Table Operations","Table Resource Names and Configuration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests DynamoDB Table Operations Table Resource Names and Configuration should validate knowledge spaces table schema requirements","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should validate knowledge spaces table schema requirements"},{"ancestorTitles":["Infrastructure Integration Tests","API Gateway Endpoint Configuration","Endpoint Structure and Routes"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests API Gateway Endpoint Configuration Endpoint Structure and Routes should have correct API Gateway endpoint structure","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should have correct API Gateway endpoint structure"},{"ancestorTitles":["Infrastructure Integration Tests","API Gateway Endpoint Configuration","Endpoint Structure and Routes"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests API Gateway Endpoint Configuration Endpoint Structure and Routes should require Cognito authorization for all endpoints","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should require Cognito authorization for all endpoints"},{"ancestorTitles":["Infrastructure Integration Tests","API Gateway Endpoint Configuration","Endpoint Structure and Routes"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests API Gateway Endpoint Configuration Endpoint Structure and Routes should support CORS for all endpoints","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should support CORS for all endpoints"},{"ancestorTitles":["Infrastructure Integration Tests","API Gateway Endpoint Configuration","API Gateway Response Format"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests API Gateway Endpoint Configuration API Gateway Response Format should return proper API Gateway response structure","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return proper API Gateway response structure"},{"ancestorTitles":["Infrastructure Integration Tests","API Gateway Endpoint Configuration","API Gateway Response Format"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests API Gateway Endpoint Configuration API Gateway Response Format should handle error responses with correct format","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle error responses with correct format"},{"ancestorTitles":["Infrastructure Integration Tests","API Gateway Endpoint Configuration","Request Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests API Gateway Endpoint Configuration Request Validation should validate request has required authentication context","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should validate request has required authentication context"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Chat Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Chat Lambda Handler should have correct handler path","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have correct handler path"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Chat Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Chat Lambda Handler should export handler function","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should export handler function"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Chat Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Chat Lambda Handler should accept APIGatewayProxyEvent and return Promise<APIGatewayProxyResult>","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept APIGatewayProxyEvent and return Promise<APIGatewayProxyResult>"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Agent Create Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Agent Create Lambda Handler should have correct handler path","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have correct handler path"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Agent Create Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Agent Create Lambda Handler should export handler function","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should export handler function"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Agent Create Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Agent Create Lambda Handler should accept APIGatewayProxyEvent with correct request format","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept APIGatewayProxyEvent with correct request format"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Knowledge Create Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Knowledge Create Lambda Handler should have correct handler path","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have correct handler path"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Knowledge Create Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Knowledge Create Lambda Handler should export handler function","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should export handler function"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Knowledge Create Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Knowledge Create Lambda Handler should accept APIGatewayProxyEvent with knowledge space data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept APIGatewayProxyEvent with knowledge space data"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Knowledge List Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Knowledge List Lambda Handler should have correct handler path","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have correct handler path"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Knowledge List Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Knowledge List Lambda Handler should export handler function","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should export handler function"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Knowledge List Lambda Handler"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Knowledge List Lambda Handler should accept APIGatewayProxyEvent for GET request","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept APIGatewayProxyEvent for GET request"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Lambda Configuration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Lambda Configuration should have correct runtime environment variables configured","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should have correct runtime environment variables configured"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Lambda Configuration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Lambda Configuration should have correct timeout configurations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have correct timeout configurations"},{"ancestorTitles":["Infrastructure Integration Tests","Lambda Handler Invocations","Lambda Configuration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Lambda Handler Invocations Lambda Configuration should have correct memory configurations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have correct memory configurations"},{"ancestorTitles":["Infrastructure Integration Tests","End-to-End Integration Flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests End-to-End Integration Flow should validate complete request-response flow structure","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should validate complete request-response flow structure"},{"ancestorTitles":["Infrastructure Integration Tests","End-to-End Integration Flow"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests End-to-End Integration Flow should validate error handling flow","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should validate error handling flow"},{"ancestorTitles":["Infrastructure Integration Tests","Infrastructure Resource Naming Conventions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Infrastructure Resource Naming Conventions should follow AWS CDK naming conventions for DynamoDB tables","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should follow AWS CDK naming conventions for DynamoDB tables"},{"ancestorTitles":["Infrastructure Integration Tests","Infrastructure Resource Naming Conventions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Infrastructure Resource Naming Conventions should have consistent Lambda function naming","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should have consistent Lambda function naming"},{"ancestorTitles":["Infrastructure Integration Tests","Infrastructure Resource Naming Conventions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Infrastructure Integration Tests Infrastructure Resource Naming Conventions should have consistent API Gateway resource naming","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have consistent API Gateway resource naming"}],"endTime":1764899089158,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/integration/InfrastructureIntegration.test.ts","startTime":1764899088479,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Controllers - validation and auth"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth KnowledgeCreateController returns 401 without tenant claim (Property 4)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"KnowledgeCreateController returns 401 without tenant claim (Property 4)"},{"ancestorTitles":["Controllers - validation and auth"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth KnowledgeCreateController returns 400 on invalid body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"KnowledgeCreateController returns 400 on invalid body"},{"ancestorTitles":["Controllers - validation and auth"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth KnowledgeCreateController calls use case on valid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"KnowledgeCreateController calls use case on valid input"},{"ancestorTitles":["Controllers - validation and auth"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth KnowledgeListController returns 401 without tenant claim","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"KnowledgeListController returns 401 without tenant claim"},{"ancestorTitles":["Controllers - validation and auth"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth AgentCreateController validates body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"AgentCreateController validates body"},{"ancestorTitles":["Controllers - validation and auth"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth ChatController enforces auth (Property 4)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"ChatController enforces auth (Property 4)"},{"ancestorTitles":["Controllers - validation and auth"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth ChatController validates body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"ChatController validates body"},{"ancestorTitles":["Controllers - validation and auth"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Controllers - validation and auth ChatController returns OpenAI-compatible payload passthrough (Property 8)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"ChatController returns OpenAI-compatible payload passthrough (Property 8)"}],"endTime":1764899089237,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/adapters/controllers/Controllers.test.ts","startTime":1764899089166,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 13: CloudWatch logging presence"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"Property 13: CloudWatch logging presence logs chat request with required fields (Requirement 7.1)","invocations":1,"location":null,"numPassingAsserts":900,"retryReasons":[],"status":"passed","title":"logs chat request with required fields (Requirement 7.1)"},{"ancestorTitles":["Property 13: CloudWatch logging presence"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"Property 13: CloudWatch logging presence logs RAG search results with hit count and top URLs (Requirement 7.2)","invocations":1,"location":null,"numPassingAsserts":1000,"retryReasons":[],"status":"passed","title":"logs RAG search results with hit count and top URLs (Requirement 7.2)"},{"ancestorTitles":["Property 13: CloudWatch logging presence"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"Property 13: CloudWatch logging presence logs structured RAG search with logRAGSearch method","invocations":1,"location":null,"numPassingAsserts":900,"retryReasons":[],"status":"passed","title":"logs structured RAG search with logRAGSearch method"},{"ancestorTitles":["Property 13: CloudWatch logging presence"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Property 13: CloudWatch logging presence emits structured JSON for all log levels","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"emits structured JSON for all log levels"},{"ancestorTitles":["Property 13: CloudWatch logging presence"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Property 13: CloudWatch logging presence includes error details on error logs","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"includes error details on error logs"}],"endTime":1764899089366,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/CloudWatchLogger.property.test.ts","startTime":1764899089244,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TiktokenChunkingService (lightweight property checks)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"TiktokenChunkingService (lightweight property checks) Property 2: consecutive chunks share overlapping text","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Property 2: consecutive chunks share overlapping text"},{"ancestorTitles":["TiktokenChunkingService (lightweight property checks)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"TiktokenChunkingService (lightweight property checks) Property 12: chunk token counts stay within bounds (last chunk may be smaller)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Property 12: chunk token counts stay within bounds (last chunk may be smaller)"}],"endTime":1764899089478,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/TiktokenChunkingService.property.test.ts","startTime":1764899089369,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TiktokenChunkingService"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"TiktokenChunkingService should chunk text into multiple pieces","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should chunk text into multiple pieces"},{"ancestorTitles":["TiktokenChunkingService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"TiktokenChunkingService should handle short text","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle short text"},{"ancestorTitles":["TiktokenChunkingService"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"TiktokenChunkingService should handle empty text","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle empty text"}],"endTime":1764899089539,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/TiktokenChunkingService.test.ts","startTime":1764899089480,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Lambda handler integration (DI wiring)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Lambda handler integration (DI wiring) invokes ChatController via DI container","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"invokes ChatController via DI container"},{"ancestorTitles":["Lambda handler integration (DI wiring)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Lambda handler integration (DI wiring) invokes KnowledgeCreateController via DI container","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"invokes KnowledgeCreateController via DI container"},{"ancestorTitles":["Lambda handler integration (DI wiring)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Lambda handler integration (DI wiring) invokes KnowledgeListController via DI container","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"invokes KnowledgeListController via DI container"},{"ancestorTitles":["Lambda handler integration (DI wiring)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Lambda handler integration (DI wiring) invokes AgentCreateController via DI container","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"invokes AgentCreateController via DI container"}],"endTime":1764899089654,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/integration/Handlers.integration.test.ts","startTime":1764899089542,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["validateKnowledgeCreateBody","valid inputs"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody valid inputs validates knowledge create body with HTTPS URLs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"validates knowledge create body with HTTPS URLs"},{"ancestorTitles":["validateKnowledgeCreateBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody valid inputs validates knowledge create body with HTTP URLs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates knowledge create body with HTTP URLs"},{"ancestorTitles":["validateKnowledgeCreateBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody valid inputs validates knowledge create body with multiple URLs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates knowledge create body with multiple URLs"},{"ancestorTitles":["validateKnowledgeCreateBody","valid inputs"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody valid inputs validates URLs with query parameters and fragments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates URLs with query parameters and fragments"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - name validation"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - name validation rejects empty name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty name"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - name validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - name validation rejects missing name","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing name"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - name validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - name validation rejects name exceeding max length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects name exceeding max length"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects invalid URL format","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects invalid URL format"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects FTP URLs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects FTP URLs"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects file:// URLs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects file:// URLs"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects empty sourceUrls array","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty sourceUrls array"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects missing sourceUrls field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing sourceUrls field"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects sourceUrls exceeding max length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects sourceUrls exceeding max length"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid inputs - URL validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid inputs - URL validation rejects when any URL in array is invalid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects when any URL in array is invalid"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid JSON"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid JSON rejects invalid JSON","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects invalid JSON"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid JSON"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid JSON rejects null body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects null body"},{"ancestorTitles":["validateKnowledgeCreateBody","invalid JSON"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateKnowledgeCreateBody invalid JSON rejects empty body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects empty body"},{"ancestorTitles":["validateAgentCreateBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody valid inputs validates agent create body with required fields","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"validates agent create body with required fields"},{"ancestorTitles":["validateAgentCreateBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody valid inputs applies default value for strictRAG when not provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"applies default value for strictRAG when not provided"},{"ancestorTitles":["validateAgentCreateBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody valid inputs validates agent create body with all optional fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"validates agent create body with all optional fields"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - name validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - name validation rejects empty name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty name"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - name validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - name validation rejects missing name","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing name"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - name validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - name validation rejects name exceeding max length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects name exceeding max length"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - knowledgeSpaceIds validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - knowledgeSpaceIds validation rejects empty knowledgeSpaceIds array","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty knowledgeSpaceIds array"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - knowledgeSpaceIds validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - knowledgeSpaceIds validation rejects missing knowledgeSpaceIds field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing knowledgeSpaceIds field"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - knowledgeSpaceIds validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - knowledgeSpaceIds validation rejects empty string in knowledgeSpaceIds array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects empty string in knowledgeSpaceIds array"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - knowledgeSpaceIds validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - knowledgeSpaceIds validation rejects array with mix of valid and invalid IDs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects array with mix of valid and invalid IDs"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - description validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - description validation rejects description exceeding max length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects description exceeding max length"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - description validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - description validation accepts empty description","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"accepts empty description"},{"ancestorTitles":["validateAgentCreateBody","invalid inputs - strictRAG validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid inputs - strictRAG validation rejects non-boolean strictRAG","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects non-boolean strictRAG"},{"ancestorTitles":["validateAgentCreateBody","invalid JSON"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid JSON rejects invalid JSON","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects invalid JSON"},{"ancestorTitles":["validateAgentCreateBody","invalid JSON"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateAgentCreateBody invalid JSON rejects null body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects null body"},{"ancestorTitles":["validateChatRequestBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody valid inputs validates chat request with single user message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"validates chat request with single user message"},{"ancestorTitles":["validateChatRequestBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody valid inputs validates chat request with multiple messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates chat request with multiple messages"},{"ancestorTitles":["validateChatRequestBody","valid inputs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody valid inputs validates message content up to max length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"validates message content up to max length"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - model validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - model validation rejects empty model","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty model"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - model validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - model validation rejects missing model field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing model field"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - messages validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - messages validation rejects empty messages array","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty messages array"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - messages validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - messages validation requires at least one user message","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"requires at least one user message"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - messages validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - messages validation rejects missing messages field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing messages field"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - message format validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - message format validation rejects invalid role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects invalid role"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - message format validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - message format validation rejects empty message content","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects empty message content"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - message format validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - message format validation rejects message content exceeding max length","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects message content exceeding max length"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - message format validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - message format validation rejects missing role field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing role field"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - message format validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - message format validation rejects missing content field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects missing content field"},{"ancestorTitles":["validateChatRequestBody","invalid inputs - message format validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid inputs - message format validation rejects malformed message object","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects malformed message object"},{"ancestorTitles":["validateChatRequestBody","invalid JSON"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid JSON rejects invalid JSON","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects invalid JSON"},{"ancestorTitles":["validateChatRequestBody","invalid JSON"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateChatRequestBody invalid JSON rejects null body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects null body"}],"endTime":1764899089690,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/validation.test.ts","startTime":1764899089656,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CloudWatchLogger Integration Tests","Log Entry Creation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Log Entry Creation should create log entries for debug logs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create log entries for debug logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Log Entry Creation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Log Entry Creation should create log entries for info logs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create log entries for info logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Log Entry Creation"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Log Entry Creation should create log entries for error logs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create log entries for error logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Log Entry Creation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Log Entry Creation should create multiple log entries in sequence","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create multiple log entries in sequence"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should output valid JSON for debug logs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should output valid JSON for debug logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should output valid JSON for info logs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should output valid JSON for info logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should output valid JSON for error logs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should output valid JSON for error logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should contain required fields in JSON output","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should contain required fields in JSON output"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should include context in JSON when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should include context in JSON when provided"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should handle complex nested context objects","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle complex nested context objects"},{"ancestorTitles":["CloudWatchLogger Integration Tests","JSON Format Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests JSON Format Validation should validate timestamp format","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should validate timestamp format"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Error Stack Trace Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Error Stack Trace Validation should include stack trace in error logs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should include stack trace in error logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Error Stack Trace Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Error Stack Trace Validation should include error message in error logs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should include error message in error logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Error Stack Trace Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Error Stack Trace Validation should capture actual stack trace from error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should capture actual stack trace from error"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Error Stack Trace Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Error Stack Trace Validation should handle error logs with context and stack trace","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle error logs with context and stack trace"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Error Stack Trace Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Error Stack Trace Validation should handle error logs without error object gracefully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle error logs without error object gracefully"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Error Stack Trace Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Error Stack Trace Validation should preserve stack trace across multiple error logs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should preserve stack trace across multiple error logs"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Real-world Integration Scenarios"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Real-world Integration Scenarios should handle a complete user request flow with multiple log entries","invocations":1,"location":null,"numPassingAsserts":13,"retryReasons":[],"status":"passed","title":"should handle a complete user request flow with multiple log entries"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Real-world Integration Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Real-world Integration Scenarios should handle error recovery scenario with proper logging","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle error recovery scenario with proper logging"},{"ancestorTitles":["CloudWatchLogger Integration Tests","Real-world Integration Scenarios"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger Integration Tests Real-world Integration Scenarios should maintain JSON format integrity under high load simulation","invocations":1,"location":null,"numPassingAsserts":401,"retryReasons":[],"status":"passed","title":"should maintain JSON format integrity under high load simulation"}],"endTime":1764899089731,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/CloudWatchLogger.integration.test.ts","startTime":1764899089703,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Error Response Formatting","Authentication Errors (401)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Authentication Errors (401) KnowledgeCreateController returns 401 when auth is missing","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"KnowledgeCreateController returns 401 when auth is missing"},{"ancestorTitles":["Error Response Formatting","Authentication Errors (401)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Authentication Errors (401) ChatController returns 401 for invalid JWT","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"ChatController returns 401 for invalid JWT"},{"ancestorTitles":["Error Response Formatting","Authentication Errors (401)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Authentication Errors (401) AgentCreateController returns 401 without authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"AgentCreateController returns 401 without authentication"},{"ancestorTitles":["Error Response Formatting","Validation Errors (400)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Validation Errors (400) KnowledgeCreateController returns 400 for invalid JSON","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"KnowledgeCreateController returns 400 for invalid JSON"},{"ancestorTitles":["Error Response Formatting","Validation Errors (400)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Validation Errors (400) KnowledgeCreateController returns 400 for missing required fields","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"KnowledgeCreateController returns 400 for missing required fields"},{"ancestorTitles":["Error Response Formatting","Validation Errors (400)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Validation Errors (400) AgentCreateController returns 400 for empty knowledgeSpaceIds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"AgentCreateController returns 400 for empty knowledgeSpaceIds"},{"ancestorTitles":["Error Response Formatting","Validation Errors (400)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Validation Errors (400) ChatController returns 400 for missing user message","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"ChatController returns 400 for missing user message"},{"ancestorTitles":["Error Response Formatting","Validation Errors (400)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Validation Errors (400) error response includes error object with message field","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"error response includes error object with message field"},{"ancestorTitles":["Error Response Formatting","Not Found Errors"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Not Found Errors ChatController returns 500 for NotFoundError (current implementation)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"ChatController returns 500 for NotFoundError (current implementation)"},{"ancestorTitles":["Error Response Formatting","Not Found Errors"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Not Found Errors logs NotFoundError with context","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"logs NotFoundError with context"},{"ancestorTitles":["Error Response Formatting","External Service Errors"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting External Service Errors returns 500 for ExternalServiceError (current implementation)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 500 for ExternalServiceError (current implementation)"},{"ancestorTitles":["Error Response Formatting","External Service Errors"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting External Service Errors returns 500 for service unavailable errors (current implementation)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 500 for service unavailable errors (current implementation)"},{"ancestorTitles":["Error Response Formatting","External Service Errors"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting External Service Errors logs external service errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"logs external service errors"},{"ancestorTitles":["Error Response Formatting","Internal Errors (500)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Internal Errors (500) returns 500 for unexpected errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 500 for unexpected errors"},{"ancestorTitles":["Error Response Formatting","Internal Errors (500)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Internal Errors (500) returns 500 for InternalError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 500 for InternalError"},{"ancestorTitles":["Error Response Formatting","Internal Errors (500)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Internal Errors (500) logs internal errors with full context","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"logs internal errors with full context"},{"ancestorTitles":["Error Response Formatting","Internal Errors (500)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Internal Errors (500) does not expose internal error details in production","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"does not expose internal error details in production"},{"ancestorTitles":["Error Response Formatting","Error Response Structure"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Error Response Structure all error responses have consistent structure","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"all error responses have consistent structure"},{"ancestorTitles":["Error Response Formatting","Error Response Structure"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Error Response Structure error responses are valid JSON","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"error responses are valid JSON"},{"ancestorTitles":["Error Response Formatting","Error Response Structure"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Response Formatting Error Response Structure error responses include appropriate HTTP status codes (current implementation)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"error responses include appropriate HTTP status codes (current implementation)"}],"endTime":1764899089827,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/adapters/controllers/ErrorResponseFormatting.test.ts","startTime":1764899089736,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Bearer token authentication - missing header"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Bearer token authentication - missing header returns 401 when Authorization header is not present","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"returns 401 when Authorization header is not present"},{"ancestorTitles":["Bearer token authentication - invalid scheme"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Bearer token authentication - invalid scheme returns 401 when Authorization header does not use Bearer scheme","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"returns 401 when Authorization header does not use Bearer scheme"},{"ancestorTitles":["Bearer token authentication - token mismatch"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Bearer token authentication - token mismatch returns 403 when provided token does not match configured value","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"returns 403 when provided token does not match configured value"}],"endTime":1764899089860,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/bearerAuth.property.test.ts","startTime":1764899089833,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1764899090742,"message":"  ‚óè Test suite failed to run\n\n    \u001b[96msrc/infrastructure/integration/CompleteFlow.integration.test.ts\u001b[0m:\u001b[93m47\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2420: \u001b[0mClass 'InMemoryKnowledgeSpaceRepository' incorrectly implements interface 'IKnowledgeSpaceRepository'.\n      Property 'delete' is missing in type 'InMemoryKnowledgeSpaceRepository' but required in type 'IKnowledgeSpaceRepository'.\n\n    \u001b[7m47\u001b[0m class InMemoryKnowledgeSpaceRepository implements IKnowledgeSpaceRepository {\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/domain/repositories/IKnowledgeSpaceRepository.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m34\u001b[0m   delete(tenantId: string, ksId: string): Promise<void>;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        'delete' is declared here.\n    \u001b[96msrc/infrastructure/integration/CompleteFlow.integration.test.ts\u001b[0m:\u001b[93m69\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2420: \u001b[0mClass 'InMemoryAgentRepository' incorrectly implements interface 'IAgentRepository'.\n      Type 'InMemoryAgentRepository' is missing the following properties from type 'IAgentRepository': update, delete\n\n    \u001b[7m69\u001b[0m class InMemoryAgentRepository implements IAgentRepository {\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/infrastructure/integration/CompleteFlow.integration.test.ts\u001b[0m:\u001b[93m103\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2420: \u001b[0mClass 'InMemoryVectorRepository' incorrectly implements interface 'IVectorRepository'.\n      Property 'deleteCollection' is missing in type 'InMemoryVectorRepository' but required in type 'IVectorRepository'.\n\n    \u001b[7m103\u001b[0m class InMemoryVectorRepository implements IVectorRepository {\n    \u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/domain/repositories/IVectorRepository.ts\u001b[0m:\u001b[93m46\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m46\u001b[0m   deleteCollection(collectionName: string): Promise<void>;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        'deleteCollection' is declared here.\n    \u001b[96msrc/infrastructure/integration/CompleteFlow.integration.test.ts\u001b[0m:\u001b[93m306\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'InMemoryKnowledgeSpaceRepository' is not assignable to parameter of type 'IKnowledgeSpaceRepository'.\n      Property 'delete' is missing in type 'InMemoryKnowledgeSpaceRepository' but required in type 'IKnowledgeSpaceRepository'.\n\n    \u001b[7m306\u001b[0m       knowledgeSpaceRepo,\n    \u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/domain/repositories/IKnowledgeSpaceRepository.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m34\u001b[0m   delete(tenantId: string, ksId: string): Promise<void>;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        'delete' is declared here.\n    \u001b[96msrc/infrastructure/integration/CompleteFlow.integration.test.ts\u001b[0m:\u001b[93m314\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'InMemoryAgentRepository' is not assignable to parameter of type 'IAgentRepository'.\n      Type 'InMemoryAgentRepository' is missing the following properties from type 'IAgentRepository': update, delete\n\n    \u001b[7m314\u001b[0m     createAgentUseCase = new CreateAgentUseCase(agentRepo, logger);\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/infrastructure/integration/CompleteFlow.integration.test.ts\u001b[0m:\u001b[93m317\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'InMemoryAgentRepository' is not assignable to parameter of type 'IAgentRepository'.\n      Type 'InMemoryAgentRepository' is missing the following properties from type 'IAgentRepository': update, delete\n\n    \u001b[7m317\u001b[0m       agentRepo,\n    \u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~\u001b[0m\n","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/integration/CompleteFlow.integration.test.ts","startTime":1764899090742,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 3: Namespace isolation"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should generate unique namespace strings for different tenants","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should generate unique namespace strings for different tenants"},{"ancestorTitles":["Property 3: Namespace isolation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should generate unique namespace strings for different KnowledgeSpaces","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should generate unique namespace strings for different KnowledgeSpaces"},{"ancestorTitles":["Property 3: Namespace isolation"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should generate unique namespace strings for different versions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should generate unique namespace strings for different versions"},{"ancestorTitles":["Property 3: Namespace isolation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should follow the format t_{tenantId}_ks_{knowledgeSpaceId}_{version}","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should follow the format t_{tenantId}_ks_{knowledgeSpaceId}_{version}"},{"ancestorTitles":["Property 3: Namespace isolation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should preserve tenant, knowledgeSpace, and version information","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should preserve tenant, knowledgeSpace, and version information"},{"ancestorTitles":["Property 3: Namespace isolation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should generate consistent namespace strings for identical inputs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should generate consistent namespace strings for identical inputs"},{"ancestorTitles":["Property 3: Namespace isolation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Namespace isolation should ensure no namespace collision across all combinations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should ensure no namespace collision across all combinations"}],"endTime":1764899089994,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/domain/value-objects/Namespace.property.test.ts","startTime":1764899089963,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SSE header configuration"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"SSE header configuration always includes required SSE headers regardless of additional headers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"always includes required SSE headers regardless of additional headers"},{"ancestorTitles":["Stream chunk size configuration"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Stream chunk size configuration resolves chunk size within allowed bounds for any input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"resolves chunk size within allowed bounds for any input"},{"ancestorTitles":["SSE formatting utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SSE formatting utilities formats payloads as SSE data events","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"formats payloads as SSE data events"},{"ancestorTitles":["SSE formatting utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SSE formatting utilities provides a fixed DONE event marker","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"provides a fixed DONE event marker"}],"endTime":1764899090018,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/streaming.property.test.ts","startTime":1764899089996,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CloudWatchLogger","debug"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger debug should log debug messages with correct format","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should log debug messages with correct format"},{"ancestorTitles":["CloudWatchLogger","debug"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger debug should log debug messages without context","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log debug messages without context"},{"ancestorTitles":["CloudWatchLogger","info"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger info should log info messages with correct format","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log info messages with correct format"},{"ancestorTitles":["CloudWatchLogger","error"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger error should log error messages with error details","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should log error messages with error details"},{"ancestorTitles":["CloudWatchLogger","error"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger error should log error messages without error object","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should log error messages without error object"},{"ancestorTitles":["CloudWatchLogger","warn"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger warn should log warning messages with correct format","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log warning messages with correct format"},{"ancestorTitles":["CloudWatchLogger","output format"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger output format should produce valid JSON output","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should produce valid JSON output"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logRequest"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logRequest should log request with sanitized context","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should log request with sanitized context"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logResponse"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logResponse should log response with status and duration","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should log response with status and duration"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logRAGSearch"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logRAGSearch should log RAG search results with URLs and scores","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should log RAG search results with URLs and scores"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logCrawlProgress"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logCrawlProgress should log crawl started","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should log crawl started"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logCrawlProgress"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logCrawlProgress should log crawl completed with chunk count","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log crawl completed with chunk count"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logCrawlProgress"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logCrawlProgress should log crawl failed with error","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log crawl failed with error"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logAgentCreation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logAgentCreation should log agent creation with configuration","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should log agent creation with configuration"},{"ancestorTitles":["CloudWatchLogger","structured logging methods","logErrorWithContext"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger structured logging methods logErrorWithContext should log error with full context","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should log error with full context"},{"ancestorTitles":["CloudWatchLogger","sensitive data sanitization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger sensitive data sanitization should redact password fields","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should redact password fields"},{"ancestorTitles":["CloudWatchLogger","sensitive data sanitization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger sensitive data sanitization should redact API key fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should redact API key fields"},{"ancestorTitles":["CloudWatchLogger","sensitive data sanitization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger sensitive data sanitization should redact token fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should redact token fields"},{"ancestorTitles":["CloudWatchLogger","sensitive data sanitization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger sensitive data sanitization should redact secret fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should redact secret fields"},{"ancestorTitles":["CloudWatchLogger","sensitive data sanitization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CloudWatchLogger sensitive data sanitization should handle case-insensitive sensitive field detection","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle case-insensitive sensitive field detection"}],"endTime":1764899090036,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/CloudWatchLogger.test.ts","startTime":1764899090020,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoDB Repositories","DynamoDBAgentRepository","save"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBAgentRepository save should save an agent to DynamoDB","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should save an agent to DynamoDB"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBAgentRepository","findByTenantAndId"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBAgentRepository findByTenantAndId should retrieve an agent from DynamoDB","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should retrieve an agent from DynamoDB"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBAgentRepository","findByTenantAndId"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBAgentRepository findByTenantAndId should return null when agent not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when agent not found"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBKnowledgeSpaceRepository","save"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBKnowledgeSpaceRepository save should save a knowledge space to DynamoDB","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should save a knowledge space to DynamoDB"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBKnowledgeSpaceRepository","findByTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBKnowledgeSpaceRepository findByTenant should retrieve all knowledge spaces for a tenant","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should retrieve all knowledge spaces for a tenant"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBKnowledgeSpaceRepository","findByTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBKnowledgeSpaceRepository findByTenant should return empty array when no knowledge spaces found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array when no knowledge spaces found"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBKnowledgeSpaceRepository","findByTenantAndId"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBKnowledgeSpaceRepository findByTenantAndId should retrieve a specific knowledge space","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should retrieve a specific knowledge space"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBKnowledgeSpaceRepository","findByTenantAndId"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBKnowledgeSpaceRepository findByTenantAndId should return null when knowledge space not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when knowledge space not found"},{"ancestorTitles":["DynamoDB Repositories","DynamoDBConversationRepository","save"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Repositories DynamoDBConversationRepository save should save a conversation to DynamoDB","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should save a conversation to DynamoDB"}],"endTime":1764899090107,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/repositories/DynamoDBRepositories.test.ts","startTime":1764899090042,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["OpenAIEmbeddingService","generateEmbedding"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OpenAIEmbeddingService generateEmbedding should generate embedding for a single text","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate embedding for a single text"},{"ancestorTitles":["OpenAIEmbeddingService","generateEmbedding"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"OpenAIEmbeddingService generateEmbedding should handle OpenAI API errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle OpenAI API errors"},{"ancestorTitles":["OpenAIEmbeddingService","generateEmbedding"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OpenAIEmbeddingService generateEmbedding retries transient failures before succeeding","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries transient failures before succeeding"},{"ancestorTitles":["OpenAIEmbeddingService","generateEmbeddings"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OpenAIEmbeddingService generateEmbeddings should generate embeddings for multiple texts","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should generate embeddings for multiple texts"}],"endTime":1764899090128,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/OpenAIEmbeddingService.test.ts","startTime":1764899090113,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ChatController authentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ChatController authentication authenticates with authorizer context (API key)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"authenticates with authorizer context (API key)"},{"ancestorTitles":["ChatController authentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ChatController authentication authenticates with valid JWT token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"authenticates with valid JWT token"},{"ancestorTitles":["ChatController authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ChatController authentication authenticates with valid API key","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"authenticates with valid API key"},{"ancestorTitles":["ChatController authentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ChatController authentication returns 401 for invalid JWT signature","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 401 for invalid JWT signature"},{"ancestorTitles":["ChatController authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ChatController authentication returns 401 for invalid API key","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 401 for invalid API key"},{"ancestorTitles":["ChatController authentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ChatController authentication returns 401 when no authentication is provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 401 when no authentication is provided"}],"endTime":1764899090197,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/adapters/controllers/ChatController.auth.test.ts","startTime":1764899090130,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Controller validation and error handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Controller validation and error handling returns 400 for invalid chat payloads","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 400 for invalid chat payloads"},{"ancestorTitles":["Controller validation and error handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Controller validation and error handling returns 400 when knowledge create body is invalid JSON","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 400 when knowledge create body is invalid JSON"},{"ancestorTitles":["Controller validation and error handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Controller validation and error handling logs server errors in AgentCreateController","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"logs server errors in AgentCreateController"}],"endTime":1764899090254,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/adapters/controllers/ValidationHandling.test.ts","startTime":1764899090199,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Error Classes","AuthenticationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AuthenticationError creates error with default message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates error with default message"},{"ancestorTitles":["Error Classes","AuthenticationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AuthenticationError creates error with custom message","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates error with custom message"},{"ancestorTitles":["Error Classes","AuthenticationError"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AuthenticationError maintains error stack trace","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"maintains error stack trace"},{"ancestorTitles":["Error Classes","AuthorizationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AuthorizationError creates error with default message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates error with default message"},{"ancestorTitles":["Error Classes","AuthorizationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes AuthorizationError creates error with custom message","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates error with custom message"},{"ancestorTitles":["Error Classes","ValidationError"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ValidationError creates error with message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates error with message"},{"ancestorTitles":["Error Classes","ValidationError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ValidationError preserves detailed validation messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"preserves detailed validation messages"},{"ancestorTitles":["Error Classes","NotFoundError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes NotFoundError creates error with message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates error with message"},{"ancestorTitles":["Error Classes","NotFoundError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes NotFoundError creates error for different resource types","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates error for different resource types"},{"ancestorTitles":["Error Classes","ExternalServiceError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ExternalServiceError creates error with default status code","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"creates error with default status code"},{"ancestorTitles":["Error Classes","ExternalServiceError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ExternalServiceError creates error with custom status code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates error with custom status code"},{"ancestorTitles":["Error Classes","ExternalServiceError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ExternalServiceError creates error for different external services","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates error for different external services"},{"ancestorTitles":["Error Classes","ExternalServiceError"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes ExternalServiceError preserves status code as public property","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"preserves status code as public property"},{"ancestorTitles":["Error Classes","InternalError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes InternalError creates error with message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates error with message"},{"ancestorTitles":["Error Classes","InternalError"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes InternalError creates error for different internal failures","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates error for different internal failures"},{"ancestorTitles":["Error Classes","Error inheritance"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes Error inheritance all custom errors extend Error","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"all custom errors extend Error"},{"ancestorTitles":["Error Classes","Error inheritance"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes Error inheritance errors can be caught as Error type","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"errors can be caught as Error type"},{"ancestorTitles":["Error Classes","Error inheritance"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes Error inheritance errors can be distinguished by name","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"errors can be distinguished by name"},{"ancestorTitles":["Error Classes","Error serialization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes Error serialization errors can be serialized to JSON","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"errors can be serialized to JSON"},{"ancestorTitles":["Error Classes","Error serialization"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Error Classes Error serialization ExternalServiceError includes statusCode in serialization","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"ExternalServiceError includes statusCode in serialization"}],"endTime":1764899090277,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/errors.test.ts","startTime":1764899090262,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["OpenAILLMService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OpenAILLMService returns completion content","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns completion content"},{"ancestorTitles":["OpenAILLMService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OpenAILLMService retries transient failures before succeeding","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"retries transient failures before succeeding"},{"ancestorTitles":["OpenAILLMService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"OpenAILLMService wraps repeated errors as ExternalServiceError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"wraps repeated errors as ExternalServiceError"}],"endTime":1764899090291,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/OpenAILLMService.test.ts","startTime":1764899090279,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns invalid when JWT_SECRET is not set","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when JWT_SECRET is not set"},{"ancestorTitles":["verifyJwt"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns invalid when token is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when token is empty"},{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns invalid for malformed JWT","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid for malformed JWT"},{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns invalid for JWT with wrong signature","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid for JWT with wrong signature"},{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns invalid for JWT with non-HS256 algorithm","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns invalid for JWT with non-HS256 algorithm"},{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns invalid when required claims are missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when required claims are missing"},{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt returns valid for correct JWT with HS256","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns valid for correct JWT with HS256"},{"ancestorTitles":["verifyJwt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"verifyJwt extracts all claims from valid JWT","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"extracts all claims from valid JWT"}],"endTime":1764899090308,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/jwtVerify.test.ts","startTime":1764899090293,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["bearerAuth utilities"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"bearerAuth utilities extracts authorization header case-insensitively","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"extracts authorization header case-insensitively"},{"ancestorTitles":["bearerAuth utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"bearerAuth utilities parses bearer tokens only when properly prefixed","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"parses bearer tokens only when properly prefixed"},{"ancestorTitles":["bearerAuth utilities"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"bearerAuth utilities validates bearer token and avoids logging full token","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"validates bearer token and avoids logging full token"},{"ancestorTitles":["bearerAuth utilities"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"bearerAuth utilities throws AuthenticationError when header missing or malformed","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"throws AuthenticationError when header missing or malformed"},{"ancestorTitles":["bearerAuth utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"bearerAuth utilities throws AuthorizationError for incorrect token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws AuthorizationError for incorrect token"},{"ancestorTitles":["bearerAuth utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"bearerAuth utilities throws InternalError when expected token is not configured","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"throws InternalError when expected token is not configured"}],"endTime":1764899090323,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/bearerAuth.test.ts","startTime":1764899090309,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should parse valid products","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should parse valid products"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should handle missing optional fields","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle missing optional fields"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should skip items with missing required fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should skip items with missing required fields"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should truncate long fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should truncate long fields"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should parse multiple products","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should parse multiple products"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should handle partial failures","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle partial failures"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should parse tags array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should parse tags array"},{"ancestorTitles":["ProductParserService","parseMarkdown"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ProductParserService parseMarkdown should handle empty input","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle empty input"}],"endTime":1764899090341,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/ProductParserService.test.ts","startTime":1764899090329,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CreateKnowledgeSpaceUseCase"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"CreateKnowledgeSpaceUseCase creates knowledge space, chunks, and upserts vectors using injected services","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"creates knowledge space, chunks, and upserts vectors using injected services"}],"endTime":1764899090408,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/CreateKnowledgeSpaceUseCase.test.ts","startTime":1764899090343,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["sse utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"sse utilities formats payload as SSE event","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"formats payload as SSE event"},{"ancestorTitles":["sse utilities"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"sse utilities creates OpenAI-compatible chunks","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates OpenAI-compatible chunks"},{"ancestorTitles":["sse utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"sse utilities generates chunk ids with chatcmpl prefix","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"generates chunk ids with chatcmpl prefix"},{"ancestorTitles":["sse utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"sse utilities splits text into configured chunk sizes without breaking unicode characters","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"splits text into configured chunk sizes without breaking unicode characters"},{"ancestorTitles":["sse utilities"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"sse utilities clamps small requested chunk sizes up to minimum bound","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"clamps small requested chunk sizes up to minimum bound"},{"ancestorTitles":["sse utilities"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"sse utilities exposes DONE sentinel event","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"exposes DONE sentinel event"}],"endTime":1764899090421,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/sse.test.ts","startTime":1764899090410,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["apiKeyAuthorizer"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"apiKeyAuthorizer returns Deny when EXPECTED_API_KEY is not set","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns Deny when EXPECTED_API_KEY is not set"},{"ancestorTitles":["apiKeyAuthorizer"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"apiKeyAuthorizer returns Deny when API key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns Deny when API key is missing"},{"ancestorTitles":["apiKeyAuthorizer"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"apiKeyAuthorizer returns Deny when API key is invalid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns Deny when API key is invalid"},{"ancestorTitles":["apiKeyAuthorizer"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"apiKeyAuthorizer returns Allow when API key is valid","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"returns Allow when API key is valid"},{"ancestorTitles":["apiKeyAuthorizer"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"apiKeyAuthorizer builds correct resource ARN for wildcard access","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"builds correct resource ARN for wildcard access"}],"endTime":1764899090433,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/handlers/apiKeyAuthorizer.test.ts","startTime":1764899090423,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SSEChunkGenerator"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SSEChunkGenerator splits content on UTF-8 boundaries without breaking multibyte characters","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"splits content on UTF-8 boundaries without breaking multibyte characters"},{"ancestorTitles":["SSEChunkGenerator"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SSEChunkGenerator creates OpenAI-compatible SSE payloads with role, content, finish reason and done sentinel","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"status":"passed","title":"creates OpenAI-compatible SSE payloads with role, content, finish reason and done sentinel"}],"endTime":1764899090445,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/infrastructure/services/SSEChunkGenerator.test.ts","startTime":1764899090435,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ChatWithAgentUseCase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ChatWithAgentUseCase returns fallback message when strict RAG yields no results","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"returns fallback message when strict RAG yields no results"},{"ancestorTitles":["ChatWithAgentUseCase"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ChatWithAgentUseCase returns LLM answer with cited URLs when results are present","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"returns LLM answer with cited URLs when results are present"}],"endTime":1764899090515,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/ChatWithAgentUseCase.test.ts","startTime":1764899090447,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ChatWithAgentUseCase Property tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ChatWithAgentUseCase Property tests Property 5: Strict RAG enforcement returns fallback when no results","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Property 5: Strict RAG enforcement returns fallback when no results"},{"ancestorTitles":["ChatWithAgentUseCase Property tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ChatWithAgentUseCase Property tests Property 6 & 7: Cited URLs subset of context and deduped","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Property 6 & 7: Cited URLs subset of context and deduped"},{"ancestorTitles":["ChatWithAgentUseCase Property tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ChatWithAgentUseCase Property tests Property 11: Agent-KnowledgeSpace linking limits searches to linked KS","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Property 11: Agent-KnowledgeSpace linking limits searches to linked KS"}],"endTime":1764899090587,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/ChatWithAgentUseCase.property.test.ts","startTime":1764899090517,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["streamingConfig"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"streamingConfig uses default chunk size when env is not set","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"uses default chunk size when env is not set"},{"ancestorTitles":["streamingConfig"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"streamingConfig clamps configured chunk size up to minimum when too small","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"clamps configured chunk size up to minimum when too small"},{"ancestorTitles":["streamingConfig"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"streamingConfig clamps configured chunk size down to maximum when too large","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"clamps configured chunk size down to maximum when too large"},{"ancestorTitles":["streamingConfig"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"streamingConfig exposes SSE headers with CORS merged","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"exposes SSE headers with CORS merged"}],"endTime":1764899090598,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/streamingConfig.test.ts","startTime":1764899090589,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["validateApiKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey returns invalid when EXPECTED_API_KEY is not set","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when EXPECTED_API_KEY is not set"},{"ancestorTitles":["validateApiKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey returns invalid when Authorization header is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when Authorization header is missing"},{"ancestorTitles":["validateApiKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey returns invalid when API key is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when API key is empty"},{"ancestorTitles":["validateApiKey"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey returns invalid when API key does not match","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns invalid when API key does not match"},{"ancestorTitles":["validateApiKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey returns valid when API key matches","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns valid when API key matches"},{"ancestorTitles":["validateApiKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey handles Authorization header without Bearer prefix","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles Authorization header without Bearer prefix"},{"ancestorTitles":["validateApiKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"validateApiKey handles case-insensitive Authorization header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles case-insensitive Authorization header"}],"endTime":1764899090611,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/shared/apiKeyCheck.test.ts","startTime":1764899090600,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ListKnowledgeSpacesUseCase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"ListKnowledgeSpacesUseCase maps repository entities to DTOs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"maps repository entities to DTOs"}],"endTime":1764899090671,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/ListKnowledgeSpacesUseCase.test.ts","startTime":1764899090618,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CreateAgentUseCase"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CreateAgentUseCase saves agent with generated id","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"saves agent with generated id"}],"endTime":1764899090728,"message":"","name":"/home/ysekiya/dev/yoshi_demo_assistants/apps/rag-chat-stream-backend/src/use-cases/CreateAgentUseCase.test.ts","startTime":1764899090673,"status":"passed","summary":""}],"wasInterrupted":false}
